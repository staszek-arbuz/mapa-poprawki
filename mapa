<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAbwSObT4E1H10xAWvLYMOuV2Tu5tEgebU&libraries=places"></script>
  <script src="https://c2dfe37c79a0fba9f40b029a755b41ad.cdn.bubble.io/f1739106044446x289966404076895000/cluster.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  <script src="https://c2dfe37c79a0fba9f40b029a755b41ad.cdn.bubble.io/f1739370278359x974105423017375100/poland_geojson.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@7/turf.min.js"></script>
  <style>
    footer {
      display: none!important;
    }
    @font-face {
              font-family: "Silka";
                      src: url("/content/themes/gree/build/fonts/eot/silka-regular-webfont.eot");
          src: url("/content/themes/gree/build/fonts/eot/silka-regular-webfont.eot?#iefix") format("embedded-opentype"),
               url("/content/themes/gree/build/fonts/woff2/silka-regular-webfont.woff2") format("woff2"),
               url("/content/themes/gree/build/fonts/woff/silka-regular-webfont.woff") format("woff"),
               url("/content/themes/gree/build/fonts/ttf/silka-regular-webfont.ttf") format("truetype");
              font-display: swap;
              font-weight: 500;
          }
  
          @font-face {
          font-family: "Silka";
          src: url("/content/themes/gree/build/fonts/eot/silka-regular-webfont.eot");
          src: url("/content/themes/gree/build/fonts/eot/silka-regular-webfont.eot?#iefix") format("embedded-opentype"),
               url("/content/themes/gree/build/fonts/woff2/silka-regular-webfont.woff2") format("woff2"),
               url("/content/themes/gree/build/fonts/woff/silka-regular-webfont.woff") format("woff"),
               url("/content/themes/gree/build/fonts/ttf/silka-regular-webfont.ttf") format("truetype");
          font-display: block;
          font-weight: 400;
      }
  
  
    .pac-container:after {
      background-image: none !important;
      height: 0px;
  }
    .g-page-header--basic {
      margin-bottom: unset!important;
    }
    .g-container {
      padding-left: unset;
      padding-right: unset;
    }
    #map {
      height: 100vh;
      width: 100%;
      margin-top:0px!important;
    }
    #search-bar {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      background: white;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
      display: flex;
      gap: 5px;
      overflow-y: auto;
      max-height: 100%;
    }
    #search-input {
      width: 300px;
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 3px;
    }
    #search-button {
      padding: 5px 10px;
      background-color: #FF4510;
      color: white;
      border: none;
      border-radius: 3px;
      cursor: pointer;
    }
    #search-button:hover {
      background-color: #FF744C;
    }
  
    input[type="checkbox"].demo2 {
  display: none;
  }
  input[type="checkbox"].demo2 + label::before {
  content:'';
  border: 1px solid #000;
  padding: 0 0.6rem;
  margin-right: 0.3rem;
  }
  input[type="checkbox"].demo2:checked + label::before {
  background-color: #000;
  }
  
  
  .loading {
  display: flex;
  justify-content: center;
  }
  .loading div {
  width: 1rem;
  height: 1rem;
  margin: 2rem 0.3rem;
  background: #647478;
  border-radius: 50%;
  -webkit-animation: 0.9s bounce infinite alternate;
          animation: 0.9s bounce infinite alternate;
  }
  .loading div:nth-child(2) {
  -webkit-animation-delay: 0.3s;
          animation-delay: 0.3s;
  }
  .loading div:nth-child(3) {
  -webkit-animation-delay: 0.6s;
          animation-delay: 0.6s;
  }
  
  @-webkit-keyframes bounce {
  to {
    opacity: 0.3;
    transform: translate3d(0, -1rem, 0);
  }
  }
  
  @keyframes bounce {
  to {
    opacity: 0.3;
    transform: translate3d(0, -1rem, 0);
  }
  }
  
  .div_results:hover {
  background-color: #d9d9d995
  ;
  }
  
  @media only screen and (max-width: 600px) {
  #search-input {
      width: 75%;
    }
    #search-bar {
      left: unset!important;
      transform: unset!important;
      width:100%!important;
      top:0!important;
      height:unset!important;
    }
    
    #selected_content {
      right: unset!important;
      width:100%!important;
    }
  }
  
  
  input[type="checkbox"].demo3 {
  display: none;
}
input[type="checkbox"].demo3 + label::before {
  font-family: "Font Awesome 5 Free";
  content: '\f0c8';
  font-size: 1.2em;  
  color: #000;
  margin-right: 0.3rem  ;
}
input[type="checkbox"].demo3:checked + label::before {
  content:'\f14a';
  color: #000;
}
  </style>
  
  
  
  <div id="map_container" style="position:relative; margin-top:0px">
    <div id="loading_screen" style="width:100%; height:100%; background-color:white; background-color: #ffffff73;position: absolute;z-index: 99;display: flex;align-items: center;justify-content: center;">
      <div  class="loading" style="scale:2">
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>

    <div id="selected_content" style="position:fixed!important;display:none; height: 120px;width: 400px;background-color: white;bottom: 2px;right: 2px;z-index: 4; border-radius: 5px;
    box-shadow: 0 5px 8px rgba(0, 0, 0, .1); ">

    </div>
  
  
  <div id="search-bar" style="flex-direction: column; left: 10px; transform:unset; top:10px">
    <h2 style="font-size:15px">Wpisz swoją lokalizację</h2>
        <div id="search_bar_div" style="display:flex">
    <input id="search-input" type="text" placeholder="miasto albo kod pocztowy...">
    <button id="search-button"><img style="width:24px" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAApZJREFUWIW9lz1oFEEYht+5BIkpRBID0WChwSBEEYVoCsEmoCiEIGJhYWOhhViIKLZKIIUiChEbUZAIFiriDwhBLIQIKRQ0jYoJWhz+JUSFBHPmsdg9mftu727ustzb7dz3/szM3sy3ThUANEvaLalf0hZJ7ZJaJX2XlJX0StIDSaPOuflKesEAmoEzwAxh+BHXN6Vh3gN8CjS2eA9sDvVyCeYHJd2UtNz89FnSE0mTkmYUbUOnpL2SVpvaX5IOOeceBc86Nu8DFsyMxuPxorAxJwPsA94Y3jzQW435+ngf81gEBoFMIL8RuGJCZAG7OiUF7hryyeD0hTrnjc71EFJvPOM8btViHms54KGnlQO6K5FueITfQHutAWK9dfE7kMelcsUNwDeveHgp5p7uiKc5Wa5wm9mzvpQCHDC6nUl1GUlrzdh4GgESdKzP/wD+fs8552ZTCpCVhPe8plSAnPfcQIkDpwY0qvCkzSUVZRQlzWOZpFUpBegwz19LBZgyYztTCmB13iVWxQfHlPe2jqThDjz2NCcqFV/2iheAjUs0325O1sFKhC7gj0d4BjTWaN5EdIPmMUfIhQQMm4PjWrX/CKIb8bbRuRhKbgU+GPI9YEUV/KeGPwHYxqasSDcwa0S+ACeAlhKcNuA0ME0x7lRaxaSWbIek+ypus3KSXkr6qKgjbpO0QVKPpIYyHlclHXfOUaamKEQH8DxhRiEYpbiTvhBsboL0A68DjceAgZjXC/w0v59L8gh6y4EuSQOSNik6YlsUdb5ZSWOKPkreGs4uRV10szd81jk3VOU61A6ibnrOrMSpugWIQ+yhsD1bBI7VO8R+Cr83FoEj9Q5xGPjrhVgAttY7xFEKL6n6roIXYhp4Aaz8BzpfAdzCD0FgAAAAAElFTkSuQmCC"></button>
        </div>
        <h2 style="font-size:15px">Rodzaj instalacji</h2>
       
        <div style="display: flex; justify-content: space-around; margin-top:-5px">

          <div style="display: flex;justify-content: center;align-items: left;">
          <input type="checkbox" class="" id="air_conditioning">
        <label for="air_conditioning" style="font: 400 14px/20px Silka,sans-serif; color:#3d3d3d; font-weight: 300;display: flex;gap: 5px;">Klimatyzacja <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_562_52)">
          <path d="M9.99586 0.00271661C9.76812 0.00271661 9.56914 0.10595 9.4423 0.263515C9.43652 0.271665 9.42787 0.279815 9.42213 0.287965C9.38463 0.339582 9.35582 0.396631 9.33562 0.459113C9.33275 0.469981 9.32984 0.480849 9.32697 0.488998C9.32119 0.51073 9.31545 0.529748 9.31254 0.55148C9.31254 0.562348 9.30967 0.573212 9.3068 0.58408C9.3068 0.605813 9.30389 0.627545 9.30967 0.649281V3.06439L7.00885 1.24966C6.7148 1.01603 6.27652 1.05135 6.02857 1.33116C5.78061 1.60826 5.81811 2.02119 6.11508 2.25482L9.31254 4.77587V8.88344L5.5298 6.82967L4.80611 2.96659C4.73979 2.60799 4.37939 2.37164 3.9988 2.43412C3.78544 2.46944 3.61244 2.59169 3.51441 2.7574C3.43657 2.88509 3.40485 3.03722 3.43657 3.19478L3.95554 5.97392L1.74701 4.77044C1.42409 4.59656 0.994488 4.69166 0.804197 4.99048C0.683102 5.17794 0.674455 5.39797 0.760951 5.58272C0.766717 5.59358 0.769598 5.60172 0.775365 5.6099C0.804197 5.66692 0.84168 5.71855 0.887811 5.76474C0.896459 5.77289 0.902225 5.78103 0.910877 5.78646C0.928176 5.80275 0.945475 5.81637 0.962775 5.82994C0.971422 5.83809 0.980074 5.84352 0.991607 5.84895C1.01179 5.86252 1.02909 5.87342 1.05215 5.88428L3.27223 7.09048L0.458213 8.05488C0.0949279 8.17985 -0.0895979 8.55472 0.0430295 8.89434C0.175657 9.23664 0.573541 9.41048 0.933943 9.28551L4.84648 7.94348L8.62057 9.99728L4.84648 12.0511L0.933943 10.7091C0.570656 10.5841 0.172774 10.7606 0.0430295 11.1002C-0.0319338 11.2931 -0.00598484 11.4941 0.0978107 11.6572C0.175657 11.7849 0.302518 11.8854 0.461094 11.9397L3.27511 12.9041L1.06657 14.1076C0.743652 14.2815 0.619672 14.6808 0.79843 14.9878C0.910877 15.1806 1.10693 15.2948 1.32029 15.3192C1.33182 15.3192 1.34336 15.3192 1.35201 15.3192C1.41832 15.3246 1.48464 15.3192 1.55095 15.3056C1.56248 15.3056 1.57402 15.3002 1.58266 15.2975C1.60573 15.292 1.62591 15.2839 1.64898 15.2758C1.66051 15.2758 1.66916 15.2676 1.68069 15.2621C1.70088 15.254 1.72394 15.2431 1.74412 15.2323L3.9642 14.0261L3.44522 16.8052C3.37891 17.1638 3.62974 17.5007 4.01033 17.5659C4.3909 17.6284 4.74844 17.392 4.81762 17.0334L5.54131 13.1703L9.3241 11.1166V15.2241L6.1266 17.7452C5.8325 17.9788 5.79217 18.3917 6.04012 18.6688C6.28807 18.9459 6.72631 18.984 7.02041 18.7503L9.32119 16.9356V19.3507C9.31254 19.3969 9.32119 19.4404 9.32697 19.4811C9.32697 19.492 9.33275 19.5029 9.33562 19.5137C9.35291 19.5762 9.37885 19.636 9.41348 19.6876C9.41922 19.6957 9.425 19.7066 9.43078 19.7148C9.55475 19.8886 9.76234 20 10.0016 20C10.2409 20 10.0247 20 10.0362 20C10.4024 19.9837 10.6907 19.7012 10.6907 19.3507V16.9356L12.9829 18.7503C13.1126 18.8536 13.2683 18.9025 13.424 18.9052C13.623 18.9052 13.8248 18.8264 13.9632 18.6715C14.2111 18.3945 14.1736 17.9815 13.8767 17.7479L10.6907 15.2268V11.1193L14.462 13.173L15.1857 17.0361C15.252 17.3947 15.6124 17.6311 15.993 17.5686C16.3735 17.5061 16.6244 17.1665 16.5581 16.8079L16.0391 14.0288L18.2591 15.235C18.2995 15.2567 18.3428 15.2758 18.386 15.2893C18.3975 15.2893 18.4091 15.2948 18.4177 15.2975C18.4841 15.3138 18.5504 15.3219 18.6167 15.3219H18.6484C18.8675 15.3083 19.078 15.1942 19.1962 14.9986C19.202 14.9878 19.2077 14.9796 19.2135 14.9688C19.3807 14.6618 19.2654 14.2869 18.9454 14.113L16.7253 12.9068L19.5393 11.9424C19.6979 11.8881 19.8218 11.7849 19.9026 11.6599C20.0035 11.4969 20.0294 11.2958 19.9574 11.1029C19.8248 10.7607 19.4268 10.5868 19.0664 10.7118L15.1539 12.0538L11.3798 10L15.1539 7.94619L19.0664 9.28822C19.4298 9.41319 19.8276 9.23664 19.9574 8.89706C20.09 8.55472 19.9026 8.17985 19.5422 8.05759L16.7282 7.09319L18.9482 5.887C18.9886 5.86524 19.0261 5.83809 19.0607 5.81094C19.0693 5.80275 19.078 5.79732 19.0866 5.78918C19.1357 5.74302 19.176 5.69411 19.2077 5.63977C19.2135 5.63163 19.2193 5.62076 19.2221 5.61262C19.3202 5.42516 19.3173 5.19694 19.1991 5.00409C19.1933 4.99319 19.1875 4.98505 19.1818 4.97419C18.9828 4.68623 18.5792 4.59113 18.2591 4.76501L16.0391 5.9712L16.5581 3.19207C16.5869 3.0345 16.5581 2.88237 16.4802 2.75468C16.3822 2.59169 16.2092 2.46672 15.9958 2.4314C15.6152 2.36892 15.2577 2.60527 15.1885 2.96387L14.4648 6.82696L10.6936 8.88073V4.77315L13.8795 2.2521C14.1736 2.01847 14.214 1.60554 13.9661 1.32844C13.8277 1.17088 13.6287 1.0921 13.4269 1.09481C13.2712 1.09481 13.1155 1.14643 12.9858 1.24966L10.6936 3.06439V0.649281C10.6936 0.290682 10.3851 0 10.0016 0H9.99586V0.00271661Z" fill="black"/>
          </g>
          <defs>
          <clipPath id="clip0_562_52">
          <rect width="20" height="20" fill="white"/>
          </clipPath>
          </defs>
          </svg>
          </label>
        </div>

        <div style="display: flex;justify-content: center;align-items: center;">
    <input type="checkbox" class="" id="heat_pumps" >
      <label for="heat_pumps" style="font: 400 14px/20px Silka,sans-serif; color:#3d3d3d; font-weight: 300; display: flex;gap: 5px; ">Pompy ciepła <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_562_34)">
        <path d="M5.65134 19.9946C5.59623 19.9946 5.54116 19.9864 5.4893 19.9675C2.05444 18.8021 0 15.9565 0 12.3601C0 8.76372 2.68632 5.93973 2.80298 5.87741C2.93584 5.80425 3.10758 5.79612 3.25016 5.85844C3.39274 5.92076 3.48023 6.04544 3.48023 6.17824C3.48023 7.16743 4.28064 8.3599 4.78289 8.3599C5.30786 8.21628 6.95723 5.43566 6.95723 3.27025C6.95723 1.10484 6.2184 0.619725 6.2087 0.614305C6.08232 0.500478 6.05315 0.329738 6.14064 0.194231C6.22814 0.0560133 6.40313 -0.0198708 6.59106 0.0045205C14.9319 1.1211 16.1309 6.433 16.7077 8.98597C16.8082 9.42501 16.9281 9.96159 17.0415 10.1594C17.0577 10.1513 17.0739 10.1378 17.0901 10.1215C17.5049 9.73396 17.5178 8.24338 17.3947 7.31108C17.3752 7.16743 17.4595 7.0265 17.6118 6.95605C17.7608 6.88289 17.9488 6.89373 18.0881 6.98043C18.1659 7.02922 20 8.22441 20 11.9969C20 15.7695 17.7706 18.5772 13.6422 19.9702C13.4576 20.0325 13.2469 19.981 13.1303 19.8482C13.0136 19.7154 13.0168 19.5311 13.1432 19.4038C14.4135 18.1056 15.1685 15.409 12.7673 13.7314C11.5554 12.8886 10.8911 11.9319 10.7842 10.8885C10.7032 10.0646 10.9916 9.35181 11.2865 8.85585C10.5541 9.04557 9.56577 9.51171 9.1089 10.6581C8.82373 11.3709 8.6293 12.0213 8.47375 12.5444C8.11407 13.7477 7.87751 14.5445 6.95723 14.5445C6.03695 14.5445 5.8004 13.6637 5.70317 13.0051C5.14257 13.4116 4.3519 14.287 4.3519 15.9998C4.3519 17.7126 5.31431 18.7642 5.98184 19.3956C6.11471 19.523 6.12766 19.71 6.01102 19.8455C5.92677 19.9431 5.79391 20 5.65459 20L5.65134 19.9946Z" fill="black"/>
        </g>
        <defs>
        <clipPath id="clip0_562_34">
        <rect width="20" height="20" fill="white"/>
        </clipPath>
        </defs>
        </svg>
        </label>
      </div>
      
        </div>
  
        <div id="results_div" style="margin-top: 0px;">
          <div class="loading" style="display:none">
          </div>
        </div>
  
  </div>
  
  
  <div style="margin-top:0px!important;" id="map"></div>
  </div>
  
  <script>

var cached_items;

var displayed = true;
    var map_style = [
            {
                "featureType": "all",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "weight": "2.00"
                    }
                ]
            },
            {
                "featureType": "all",
                "elementType": "geometry.stroke",
                "stylers": [
                    {
                        "color": "#9C9C9C"
                    }
                ]
            },
            {
                "featureType": "all",
                "elementType": "labels.text",
                "stylers": [
                    {
                        "visibility": "on"
                    }
                ]
            },
            {
                "featureType": "administrative.country",
                "elementType": "labels.text.stroke",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "administrative.locality",
                "elementType": "labels.text.stroke",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "landscape",
                "elementType": "all",
                "stylers": [
                    {
                        "color": "#F2F2F2"
                    }
                ]
            },
            {
                "featureType": "landscape",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "color": "#FFFFFF"
                    }
                ]
            },
            {
                "featureType": "landscape.man_made",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "color": "#E6EBF0"
                    }
                ]
            },
            {
                "featureType": "landscape.natural.landcover",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "color": "#E6EBF0"
                    }
                ]
            },
            {
                "featureType": "poi",
                "elementType": "all",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "road",
                "elementType": "all",
                "stylers": [
                    {
                        "saturation": -100
                    },
                    {
                        "lightness": 45
                    }
                ]
            },
            {
                "featureType": "road",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "color": "#EEEEEE"
                    }
                ]
            },
            {
                "featureType": "road",
                "elementType": "labels.text.fill",
                "stylers": [
                    {
                        "color": "#7B7B7B"
                    }
                ]
            },
            {
                "featureType": "road",
                "elementType": "labels.text.stroke",
                "stylers": [
                    {
                        "color": "#FFFFFF"
                    }
                ]
            },
            {
                "featureType": "road.highway",
                "elementType": "all",
                "stylers": [
                    {
                        "visibility": "simplified"
                    }
                ]
            },
            {
                "featureType": "road.highway",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "color": "#FFFFFF"
                    }
                ]
            },
            {
                "featureType": "road.arterial",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "color": "#FFFFFF"
                    }
                ]
            },
            {
                "featureType": "road.arterial",
                "elementType": "geometry.stroke",
                "stylers": [
                    {
                        "color": "#FFFFFF"
                    }
                ]
            },
            {
                "featureType": "road.arterial",
                "elementType": "labels.icon",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "road.local",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "color": "#FFFFFF"
                    }
                ]
            },
            {
                "featureType": "road.local",
                "elementType": "geometry.stroke",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "transit",
                "elementType": "all",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "water",
                "elementType": "all",
                "stylers": [
                    {
                        "color": "#46BCEC"
                    },
                    {
                        "visibility": "on"
                    }
                ]
            },
            {
                "featureType": "water",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "color": "#9BCBFF"
                    }
                ]
            },
            {
                "featureType": "water",
                "elementType": "labels.text.fill",
                "stylers": [
                    {
                        "color": "#070707"
                    }
                ]
            },
            {
                "featureType": "water",
                "elementType": "labels.text.stroke",
                "stylers": [
                    {
                        "color": "#FFFFFF"
                    }
                ]
            }
        ];
   // Replace with your actual API key
    const mapApiKey = "AIzaSyCKpoUD_Emut50zdfw1UqJJ210VhpydzOE";
  
    let map;
    let markers = [];
    let markerCluster;
    let polandCenter = { lat: 52.24241231534535, lng: 19.28621047660923 };
    let searchMarkers = [];
    let processedCompanies;
  zoom = 6.5
    if (window.innerWidth < 760) {
  zoom = 5.9
    }

    var nearby_results;

async function loadCachedItems() {
  try {
    const response = await fetch("https://gree.ivn-works.com/wordpress/data/cached_items.json");
    cached_items = await response.json();
    console.log("Cached Items Loaded:", cached_items);
  } catch (error) {
    console.error("Error fetching cached items:", error);
  }
}

(async () => {
  await loadCachedItems();
  console.log("Now you can proceed with the next operations!");
  
    // Initialize and add the map
    function initMap() {
      // Center the map on Poland
       map = new google.maps.Map(document.getElementById("map"), {
        zoom: zoom,
        center: polandCenter,
        disableDefaultUI: true,
        gestureHandling: "greedy",
        zoomControl: true,
        zoomControlOptions: {
      position: google.maps.ControlPosition.RIGHT_TOP,
    },
        styles: map_style,
      });
  
      addYourLocationButton(map);
      //setGeoJsonBounds(poland_geojson);
  
    fetchcacheddata();
    fetchDataAndShowMarkers();
    }
  

    function fetchcacheddata() {
      if (cached_items.success) {
          console.log(cached_items);
          addMarkers(cached_items.results, "both");
      }
    }
  
  
    function fetchDataAndShowMarkers() {
      fetch("https://corsproxy.io/https://europe-west3-strefa-gree.cloudfunctions.net/findValidInstallers")
        .then((response) => response.json())
        .then((data) => {
          if (data.success) {
            console.log(data);
            addMarkers(data.results, "both");
          } else {
            console.error("Failed to fetch data from the API");
          }
        })
        .catch((error) => console.error("Error fetching API data:", error));
  
        const input = document.getElementById("search-input");
      const searchButton = document.getElementById("search-button");
      const options = {
  componentRestrictions: { country: "pl" },
  fields: ["address_components", "geometry", "icon", "name"],
  strictBounds: false,
  types: ['administrative_area_level_1', 'administrative_area_level_2', 'administrative_area_level_3']
  };
      const searchBox = new google.maps.places.Autocomplete(input, options);
  
      searchBox.addListener("places_changed", () => {
        const places = searchBox.getPlaces();
  
        if (places.length === 0) {
          return;
        }
  
        const bounds = new google.maps.LatLngBounds();
        places.forEach((place) => {
          if (!place.geometry || !place.geometry.location) {
            console.log("Returned place contains no geometry");
            return;
          }
  
          if (place.geometry.viewport) {
            bounds.union(place.geometry.viewport);
          } else {
            bounds.extend(place.geometry.location);
          }
        });
  
        map.fitBounds(bounds);
      });
  
      searchButton.addEventListener("click", () => { 
        clearSearchMarkers();
        const query = input.value;
        const request = {
          query,
          fields: ["ALL"],
          locationBias: polandCenter,
        };
  
        const service = new google.maps.places.PlacesService(map);
        service.findPlaceFromQuery(request, (results, status) => {
          if (status === google.maps.places.PlacesServiceStatus.OK && results) {
            map.setCenter(results[0].geometry.location);
            console.log(results[0]);
            map.setZoom(10);
            var results_div = document.getElementById("results_div");
            results_div.innerHTML = ` <div class="results_title" style="display: flex;align-items: center;justify-content: space-between;"><h2 style="font-size:15px">Instalatorzy w Twojej okolicy</h2><div id="zamknij" style="text-decoration: underline; cursor:pointer; font:400 14px Silka,sans-serif" onclick="display_button()">pokaż mapę</div></div> <div class="loading" style="display:none">
            <div></div>
            <div></div>
            <div></div>
          </div>`;
          $('.loading').css('display', 'flex');
            var heat_pumps = document.getElementById("heat_pumps");
            var air_conditioning = document.getElementById("air_conditioning");
             processedCompanies = new Set();


             if (heat_pumps.checked == true && air_conditioning.checked == true ) {
              const cityName = results[0].name; // Extract the city name
            const centerCoords = { lat: results[0].geometry.location.lat(), lon: results[0].geometry.location.lng() };
            function findNearestInstallers(center, cachedItems) {
                if (!center || !center.lat || !center.lon) {
                    console.error("Invalid center coordinates.");
                    return [];
                }
                const centerPoint = turf.point([center.lon, center.lat]);
                const validInstallers = cachedItems.results
                    .filter(item => item.data.company.coords && item.data.company.coords.lon && item.data.company.coords.lat && item.data.valid_until_heat_pump && item.data.valid_until_rac)
                    .map(item => {
                        const coords = item.data.company.coords;
                        return {
                            data: item.data,
                            distance: turf.distance(centerPoint, turf.point([parseFloat(coords.lon), parseFloat(coords.lat)]), { units: 'kilometers' })
                        };
                    });
                return validInstallers.sort((a, b) => a.distance - b.distance).slice(0, 5);
            }
            const content = findNearestInstallers(centerCoords, cached_items);
            console.log(content);
            

            //showMarkersForLocations(content, true);
            if (content.length !== 0) {
              $('.loading').css('display', 'none');
                content.forEach((content_result) => {
                  processedCompanies.add(content_result.data.company.name);
                  $('#display_button').css('display', 'block');
                    console.log(content_result);
                    phone = '';
                    email = '';
                    onclick1 = '';
                    additionalIcons = '';
                    if (content_result.data.company.coords !== null) {
                      onclick1 = `flyto(true,${content_result.data.company.coords.lat},${content_result.data.company.coords.lon},'${content_result.data.company.city}','${content_result.data.company.email}','${content_result.data.company.name}','${content_result.data.company.phone}','${content_result.data.company.street}','${content_result.data.company.post_code}')`;
                    }
                    if (content_result.data.company.phone !== null) {
  phone = `<svg class="mph-svg mph-svg--phone" width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.32343 10.387L8.3246 10.3856C8.55845 10.094 8.8823 9.88798 9.24564 9.79983C9.60867 9.71175 9.99062 9.74631 10.3319 9.89809C10.3322 9.89821 10.3325 9.89834 10.3328 9.89847L12.424 10.8246L12.4251 10.8251C12.7913 10.9878 13.0878 11.2752 13.2619 11.636C13.4361 11.9969 13.4766 12.4077 13.3762 12.7956L13.3758 12.7975L12.9156 14.562C12.9154 14.563 12.9151 14.5641 12.9148 14.5651C12.8111 14.9681 12.5625 15.3189 12.2163 15.5502C11.8697 15.7818 11.4499 15.8774 11.0372 15.8185C8.61473 15.4784 6.36873 14.3588 4.63862 12.6289C2.9081 10.8985 1.78779 8.65156 1.44696 6.22781L2.43722 6.08856L1.44738 6.23075C1.38804 5.81771 1.48337 5.39727 1.71511 5.0502L2.54676 5.60549L1.71511 5.0502C1.9463 4.70395 2.29702 4.45506 2.70022 4.3512L4.46691 3.89012L4.46782 3.88988C4.85606 3.78894 5.26752 3.82925 5.62879 4.00359C5.98997 4.17789 6.27744 4.47479 6.44006 4.84126L8.32343 10.387ZM8.32343 10.387L8.081 10.6905C7.51077 10.2614 7.00372 9.75407 6.57485 9.1835L6.87876 8.9405L6.8794 8.93999M8.32343 10.387L6.8794 8.93999M6.8794 8.93999C7.17124 8.70624 7.37741 8.38243 7.46579 8.0192M6.8794 8.93999L7.46579 8.0192M7.46579 8.0192C7.55417 7.65603 7.51985 7.2738 7.36818 6.93217M7.46579 8.0192L7.36818 6.93217M7.36818 6.93217C7.36816 6.93212 7.36813 6.93207 7.36811 6.93201M7.36818 6.93217L7.36811 6.93201M7.36811 6.93201L6.44017 4.84149L7.36811 6.93201Z" stroke="#00B1EB" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M10.4302 4.83545C10.9606 4.83545 11.4693 5.04616 11.8444 5.42124C12.2195 5.79631 12.4302 6.30502 12.4302 6.83545" stroke="#00B1EB" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M11.4302 1.83545C11.9555 1.83545 12.4756 1.96478 12.9609 2.21605C13.4462 2.46733 13.8872 2.83562 14.2586 3.29992C14.63 3.76421 14.9247 4.3154 15.1257 4.92203C15.3267 5.52866 15.4302 6.17884 15.4302 6.83545" stroke="#00B1EB" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
  </svg> ${content_result.data.company.phone}<br>`;
                    }
                    if (content_result.data.company.email !== null) {
  email = `<svg class="mph-svg mph-svg--email" width="17" height="17" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M10.5 16.7L4.15213 21.3022C3.11434 22.0546 2.5 23.2588 2.5 24.5406V42.4999C2.5 44.7091 4.29086 46.5 6.5 46.5H42.5C44.7091 46.5 46.5 44.7091 46.5 42.5V24.5406C46.5 23.2588 45.8857 22.0546 44.8479 21.3022L38.5 16.7" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M10.5 26.9V6.5C10.5 4.29086 12.2909 2.5 14.5 2.5H34.5C36.7091 2.5 38.5 4.29086 38.5 6.5V26.9" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M3 23L45 45" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M46 23L25 34.5" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M18.5 12.5H30.5" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M18.5 20.5H30.5" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  </svg> ${content_result.data.company.email}<br>`;
                    }

                    const cachedCompany = cached_items.results.find(item => item.data.company.name === content_result.data.company.name);
                    console.log(cachedCompany);
                if (cachedCompany && cachedCompany.data.valid_until_heat_pump !== null && cachedCompany.data.valid_until_rac !== null) {
                    additionalIcons = `
                        <svg style="width:25px"  width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_562_48)">
<path d="M19.9917 0.00543322C19.5362 0.00543322 19.1383 0.211899 18.8846 0.52703C18.873 0.543331 18.8557 0.559631 18.8443 0.57593C18.7693 0.679163 18.7116 0.793262 18.6712 0.918226C18.6655 0.939962 18.6597 0.961698 18.6539 0.977996C18.6424 1.02146 18.6309 1.0595 18.6251 1.10296C18.6251 1.1247 18.6193 1.14642 18.6136 1.16816C18.6136 1.21163 18.6078 1.25509 18.6193 1.29856V6.12877L14.0177 2.49932C13.4296 2.03205 12.553 2.10269 12.0571 2.66232C11.5612 3.21652 11.6362 4.04238 12.2302 4.50964L18.6251 9.55174V17.7669L11.0596 13.6593L9.61221 5.93317C9.47959 5.21598 8.75877 4.74327 7.99759 4.86824C7.57088 4.93888 7.22489 5.18337 7.02883 5.51481C6.87314 5.77017 6.80971 6.07443 6.87314 6.38957L7.91109 11.9478L3.49402 9.54088C2.84817 9.19312 1.98898 9.38333 1.60839 9.98096C1.3662 10.3559 1.34891 10.7959 1.5219 11.1654C1.53343 11.1872 1.5392 11.2034 1.55073 11.2198C1.60839 11.3338 1.68336 11.4371 1.77562 11.5295C1.79292 11.5458 1.80445 11.5621 1.82175 11.5729C1.85635 11.6055 1.89095 11.6327 1.92555 11.6599C1.94284 11.6762 1.96015 11.687 1.98321 11.6979C2.02357 11.725 2.05817 11.7468 2.1043 11.7686L6.54445 14.181L0.916426 16.1098C0.189856 16.3597 -0.179196 17.1094 0.0860591 17.7887C0.351315 18.4733 1.14708 18.821 1.86789 18.571L9.69295 15.887L17.2411 19.9946L9.69295 24.1022L1.86789 21.4181C1.14131 21.1682 0.345548 21.5213 0.0860591 22.2005C-0.0638676 22.5862 -0.0119697 22.9883 0.195621 23.3143C0.351315 23.5697 0.605037 23.7707 0.922189 23.8794L6.55022 25.8082L2.13314 28.2151C1.4873 28.5629 1.23934 29.3616 1.59686 29.9755C1.82175 30.3613 2.21387 30.5895 2.64058 30.6384C2.66365 30.6384 2.68671 30.6384 2.70402 30.6384C2.83664 30.6493 2.96927 30.6384 3.1019 30.6112C3.12497 30.6112 3.14803 30.6004 3.16533 30.595C3.21146 30.5841 3.25183 30.5678 3.29796 30.5515C3.32102 30.5515 3.33832 30.5351 3.36139 30.5243C3.40175 30.508 3.44789 30.4863 3.48825 30.4646L7.92839 28.0522L6.89043 33.6104C6.75781 34.3276 7.25948 35.0014 8.02066 35.1318C8.7818 35.2567 9.49689 34.784 9.63525 34.0668L11.0826 26.3406L18.6482 22.2331V30.4483L12.2532 35.4903C11.665 35.9576 11.5843 36.7835 12.0802 37.3377C12.5761 37.8919 13.4526 37.968 14.0408 37.5007L18.6424 33.8712V38.7014C18.6251 38.7938 18.6424 38.8808 18.6539 38.9622C18.6539 38.9839 18.6655 39.0057 18.6712 39.0275C18.7058 39.1524 18.7577 39.272 18.827 39.3751C18.8384 39.3914 18.85 39.4132 18.8616 39.4295C19.1095 39.7772 19.5247 40 20.0033 40C20.4819 40 20.0494 40 20.0725 40C20.8048 39.9674 21.3815 39.4024 21.3815 38.7014V33.8712L25.9657 37.5007C26.2252 37.7071 26.5366 37.805 26.848 37.8104C27.2459 37.8104 27.6496 37.6528 27.9263 37.3431C28.4222 36.7889 28.3473 35.9631 27.7534 35.4958L21.3815 30.4537V22.2385L28.9239 26.3461L30.3713 34.0723C30.5039 34.7894 31.2248 35.2622 31.9859 35.1372C32.747 35.0122 33.2488 34.3331 33.1161 33.6158L32.0782 28.0576L36.5183 30.47C36.599 30.5134 36.6856 30.5515 36.772 30.5787C36.7951 30.5787 36.8182 30.5895 36.8355 30.595C36.9681 30.6275 37.1007 30.6438 37.2334 30.6438H37.2968C37.735 30.6167 38.156 30.3885 38.3924 29.9972C38.4039 29.9755 38.4155 29.9592 38.427 29.9375C38.7615 29.3235 38.5308 28.5738 37.8907 28.226L33.4506 25.8136L39.0786 23.8848C39.3957 23.7761 39.6437 23.5697 39.8052 23.3198C40.007 22.9937 40.0589 22.5917 39.9148 22.2059C39.6495 21.5213 38.8537 21.1736 38.1329 21.4236L30.3079 24.1076L22.7596 20L30.3079 15.8924L38.1329 18.5764C38.8595 18.8264 39.6552 18.4733 39.9148 17.7941C40.18 17.1094 39.8052 16.3597 39.0843 16.1152L33.4563 14.1864L37.8965 11.774C37.9772 11.7305 38.0522 11.6762 38.1214 11.6219C38.1387 11.6055 38.156 11.5946 38.1733 11.5784C38.2713 11.486 38.3521 11.3882 38.4155 11.2795C38.427 11.2633 38.4385 11.2415 38.4443 11.2252C38.6403 10.8503 38.6346 10.3939 38.3982 10.0082C38.3866 9.98639 38.3751 9.9701 38.3635 9.94837C37.9657 9.37247 37.1584 9.18226 36.5183 9.53002L32.0782 11.9424L33.1161 6.38414C33.1738 6.069 33.1161 5.76473 32.9604 5.50937C32.7643 5.18337 32.4184 4.93345 31.9916 4.86281C31.2305 4.73784 30.5155 5.21054 30.377 5.92774L28.9297 13.6539L21.3872 17.7615V9.54631L27.7591 4.50421C28.3473 4.03695 28.428 3.21108 27.9321 2.65689C27.6553 2.34175 27.2575 2.18419 26.8538 2.18962C26.5424 2.18962 26.231 2.29286 25.9716 2.49932L21.3872 6.12877V1.29856C21.3872 0.581364 20.7702 0 20.0033 0H19.9917V0.00543322Z" fill="black"/>
</g>
<defs>
<clipPath id="clip0_562_48">
<rect width="40" height="40" fill="white"/>
</clipPath>
</defs>
</svg>
                    `;
                }

                    results_div.innerHTML = results_div.innerHTML + ` <div class="div_results" style="padding:10px; display:flex; flex-direction: column;" >


               <div style="display: flex;">
                <div style="width:20%;display: flex;flex-direction: column;">
                                  <svg style="width:25px" width="38" height="46" viewBox="0 0 38 46" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_562_32)">
<path d="M10.7376 45.9876C10.6328 45.9876 10.5282 45.9688 10.4297 45.9252C3.90344 43.2449 0 36.6998 0 28.4282C0 20.1565 5.10402 13.6614 5.32567 13.5181C5.5781 13.3498 5.90441 13.3311 6.1753 13.4744C6.44621 13.6178 6.61244 13.9045 6.61244 14.21C6.61244 16.4851 8.13322 19.2278 9.08748 19.2278C10.0849 18.8975 13.2187 12.502 13.2187 7.52157C13.2187 2.54114 11.815 1.42537 11.7965 1.4129C11.5564 1.1511 11.501 0.758398 11.6672 0.446731C11.8335 0.128831 12.1659 -0.0457029 12.523 0.0103972C28.3707 2.57853 30.6487 14.7959 31.7446 20.6677C31.9355 21.6775 32.1633 22.9117 32.3788 23.3667C32.4096 23.348 32.4403 23.3169 32.4712 23.2794C33.2592 22.3881 33.2839 18.9598 33.0499 16.8155C33.0129 16.4851 33.173 16.161 33.4624 15.9989C33.7456 15.8306 34.1028 15.8556 34.3675 16.055C34.5152 16.1672 38 18.9161 38 27.5929C38 36.2697 33.7641 42.7275 25.9203 45.9314C25.5694 46.0748 25.1692 45.9564 24.9475 45.6509C24.7259 45.3455 24.732 44.9216 24.9722 44.6287C27.3856 41.6429 28.8201 35.4408 24.2579 31.5822C21.9553 29.6437 20.6931 27.4433 20.4899 25.0435C20.336 23.1485 20.884 21.5092 21.4443 20.3685C20.0528 20.8048 18.175 21.8769 17.3069 24.5137C16.7651 26.153 16.3957 27.6491 16.1001 28.8521C15.4167 31.6197 14.9673 33.4523 13.2187 33.4523C11.4702 33.4523 11.0208 31.4265 10.836 29.9117C9.77087 30.8468 8.26862 32.8601 8.26862 36.7996C8.26862 40.7391 10.0972 43.1576 11.3655 44.6099C11.6179 44.9029 11.6425 45.333 11.4209 45.6447C11.2609 45.8691 11.0084 46 10.7437 46L10.7376 45.9876Z" fill="black"/>
</g>
<defs>
<clipPath id="clip0_562_32">
<rect width="38" height="46" fill="white"/>
</clipPath>
</defs>
</svg>
 ${additionalIcons}
                  </div>

                  <div style="width:80%">

<b style="font: 500 16px / 24px Clan-N, sans-serif;letter-spacing: -.4px;color: #272727;font-weight: 600;">${content_result.data.company.name}</b>
                <div style="font: 500 14px / 21px Clan-Pro-Book, sans-serif; letter-spacing: -.6px; color: #2d2d2d">${content_result.data.company.street}, ${content_result.data.company.city}</div>
                 <div style="display: flex;flex-direction: row;margin-top: 10px;">
                  <button style="background-color:white; color:black; border: 2px solid black;padding: 7px;cursor: pointer;" onclick="${onclick1}">pokaż na mapie</button>
                  </div>
                

</div>
                    </div>
                    <hr style="width:100%; opacity:0.2">`;
                    
                });
                $('.loading').css('display', 'none');
            } else {
              $('.loading').css('display', 'none');
            }
            } else if (heat_pumps.checked == true) {
              const cityName = results[0].name; // Extract the city name
            const centerCoords = { lat: results[0].geometry.location.lat(), lon: results[0].geometry.location.lng() };
            function findNearestInstallers(center, cachedItems) {
                if (!center || !center.lat || !center.lon) {
                    console.error("Invalid center coordinates.");
                    return [];
                }
                const centerPoint = turf.point([center.lon, center.lat]);
                const validInstallers = cachedItems.results
                    .filter(item => item.data.company.coords && item.data.company.coords.lon && item.data.company.coords.lat && item.data.valid_until_heat_pump)
                    .map(item => {
                        const coords = item.data.company.coords;
                        return {
                            data: item.data,
                            distance: turf.distance(centerPoint, turf.point([parseFloat(coords.lon), parseFloat(coords.lat)]), { units: 'kilometers' })
                        };
                    });
                return validInstallers.sort((a, b) => a.distance - b.distance).slice(0, 5);
            }
            const content = findNearestInstallers(centerCoords, cached_items);
            console.log(content);
            

            //showMarkersForLocations(content, true);
            if (content.length !== 0) {
              $('.loading').css('display', 'none');
                content.forEach((content_result) => {
                  processedCompanies.add(content_result.data.company.name);
                  $('#display_button').css('display', 'block');
                    console.log(content_result);
                    phone = '';
                    email = '';
                    onclick1 = '';
                    additionalIcons = '';
                    if (content_result.data.company.coords !== null) {
                      onclick1 = `flyto(true,${content_result.data.company.coords.lat},${content_result.data.company.coords.lon},'${content_result.data.company.city}','${content_result.data.company.email}','${content_result.data.company.name}','${content_result.data.company.phone}','${content_result.data.company.street}','${content_result.data.company.post_code}')`;
                    }
                    if (content_result.data.company.phone !== null) {
  phone = `<svg class="mph-svg mph-svg--phone" width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.32343 10.387L8.3246 10.3856C8.55845 10.094 8.8823 9.88798 9.24564 9.79983C9.60867 9.71175 9.99062 9.74631 10.3319 9.89809C10.3322 9.89821 10.3325 9.89834 10.3328 9.89847L12.424 10.8246L12.4251 10.8251C12.7913 10.9878 13.0878 11.2752 13.2619 11.636C13.4361 11.9969 13.4766 12.4077 13.3762 12.7956L13.3758 12.7975L12.9156 14.562C12.9154 14.563 12.9151 14.5641 12.9148 14.5651C12.8111 14.9681 12.5625 15.3189 12.2163 15.5502C11.8697 15.7818 11.4499 15.8774 11.0372 15.8185C8.61473 15.4784 6.36873 14.3588 4.63862 12.6289C2.9081 10.8985 1.78779 8.65156 1.44696 6.22781L2.43722 6.08856L1.44738 6.23075C1.38804 5.81771 1.48337 5.39727 1.71511 5.0502L2.54676 5.60549L1.71511 5.0502C1.9463 4.70395 2.29702 4.45506 2.70022 4.3512L4.46691 3.89012L4.46782 3.88988C4.85606 3.78894 5.26752 3.82925 5.62879 4.00359C5.98997 4.17789 6.27744 4.47479 6.44006 4.84126L8.32343 10.387ZM8.32343 10.387L8.081 10.6905C7.51077 10.2614 7.00372 9.75407 6.57485 9.1835L6.87876 8.9405L6.8794 8.93999M8.32343 10.387L6.8794 8.93999M6.8794 8.93999C7.17124 8.70624 7.37741 8.38243 7.46579 8.0192M6.8794 8.93999L7.46579 8.0192M7.46579 8.0192C7.55417 7.65603 7.51985 7.2738 7.36818 6.93217M7.46579 8.0192L7.36818 6.93217M7.36818 6.93217C7.36816 6.93212 7.36813 6.93207 7.36811 6.93201M7.36818 6.93217L7.36811 6.93201M7.36811 6.93201L6.44017 4.84149L7.36811 6.93201Z" stroke="#00B1EB" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M10.4302 4.83545C10.9606 4.83545 11.4693 5.04616 11.8444 5.42124C12.2195 5.79631 12.4302 6.30502 12.4302 6.83545" stroke="#00B1EB" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M11.4302 1.83545C11.9555 1.83545 12.4756 1.96478 12.9609 2.21605C13.4462 2.46733 13.8872 2.83562 14.2586 3.29992C14.63 3.76421 14.9247 4.3154 15.1257 4.92203C15.3267 5.52866 15.4302 6.17884 15.4302 6.83545" stroke="#00B1EB" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
  </svg> ${content_result.data.company.phone}<br>`;
                    }
                    if (content_result.data.company.email !== null) {
  email = `<svg class="mph-svg mph-svg--email" width="17" height="17" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M10.5 16.7L4.15213 21.3022C3.11434 22.0546 2.5 23.2588 2.5 24.5406V42.4999C2.5 44.7091 4.29086 46.5 6.5 46.5H42.5C44.7091 46.5 46.5 44.7091 46.5 42.5V24.5406C46.5 23.2588 45.8857 22.0546 44.8479 21.3022L38.5 16.7" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M10.5 26.9V6.5C10.5 4.29086 12.2909 2.5 14.5 2.5H34.5C36.7091 2.5 38.5 4.29086 38.5 6.5V26.9" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M3 23L45 45" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M46 23L25 34.5" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M18.5 12.5H30.5" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M18.5 20.5H30.5" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  </svg> ${content_result.data.company.email}<br>`;
                    }

                    const cachedCompany = cached_items.results.find(item => item.data.company.name === content_result.data.company.name);
                    console.log(cachedCompany);
                if (cachedCompany && cachedCompany.data.valid_until_heat_pump !== null && cachedCompany.data.valid_until_rac !== null) {
                    additionalIcons = `
                        <svg style="width:25px"  width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_562_48)">
<path d="M19.9917 0.00543322C19.5362 0.00543322 19.1383 0.211899 18.8846 0.52703C18.873 0.543331 18.8557 0.559631 18.8443 0.57593C18.7693 0.679163 18.7116 0.793262 18.6712 0.918226C18.6655 0.939962 18.6597 0.961698 18.6539 0.977996C18.6424 1.02146 18.6309 1.0595 18.6251 1.10296C18.6251 1.1247 18.6193 1.14642 18.6136 1.16816C18.6136 1.21163 18.6078 1.25509 18.6193 1.29856V6.12877L14.0177 2.49932C13.4296 2.03205 12.553 2.10269 12.0571 2.66232C11.5612 3.21652 11.6362 4.04238 12.2302 4.50964L18.6251 9.55174V17.7669L11.0596 13.6593L9.61221 5.93317C9.47959 5.21598 8.75877 4.74327 7.99759 4.86824C7.57088 4.93888 7.22489 5.18337 7.02883 5.51481C6.87314 5.77017 6.80971 6.07443 6.87314 6.38957L7.91109 11.9478L3.49402 9.54088C2.84817 9.19312 1.98898 9.38333 1.60839 9.98096C1.3662 10.3559 1.34891 10.7959 1.5219 11.1654C1.53343 11.1872 1.5392 11.2034 1.55073 11.2198C1.60839 11.3338 1.68336 11.4371 1.77562 11.5295C1.79292 11.5458 1.80445 11.5621 1.82175 11.5729C1.85635 11.6055 1.89095 11.6327 1.92555 11.6599C1.94284 11.6762 1.96015 11.687 1.98321 11.6979C2.02357 11.725 2.05817 11.7468 2.1043 11.7686L6.54445 14.181L0.916426 16.1098C0.189856 16.3597 -0.179196 17.1094 0.0860591 17.7887C0.351315 18.4733 1.14708 18.821 1.86789 18.571L9.69295 15.887L17.2411 19.9946L9.69295 24.1022L1.86789 21.4181C1.14131 21.1682 0.345548 21.5213 0.0860591 22.2005C-0.0638676 22.5862 -0.0119697 22.9883 0.195621 23.3143C0.351315 23.5697 0.605037 23.7707 0.922189 23.8794L6.55022 25.8082L2.13314 28.2151C1.4873 28.5629 1.23934 29.3616 1.59686 29.9755C1.82175 30.3613 2.21387 30.5895 2.64058 30.6384C2.66365 30.6384 2.68671 30.6384 2.70402 30.6384C2.83664 30.6493 2.96927 30.6384 3.1019 30.6112C3.12497 30.6112 3.14803 30.6004 3.16533 30.595C3.21146 30.5841 3.25183 30.5678 3.29796 30.5515C3.32102 30.5515 3.33832 30.5351 3.36139 30.5243C3.40175 30.508 3.44789 30.4863 3.48825 30.4646L7.92839 28.0522L6.89043 33.6104C6.75781 34.3276 7.25948 35.0014 8.02066 35.1318C8.7818 35.2567 9.49689 34.784 9.63525 34.0668L11.0826 26.3406L18.6482 22.2331V30.4483L12.2532 35.4903C11.665 35.9576 11.5843 36.7835 12.0802 37.3377C12.5761 37.8919 13.4526 37.968 14.0408 37.5007L18.6424 33.8712V38.7014C18.6251 38.7938 18.6424 38.8808 18.6539 38.9622C18.6539 38.9839 18.6655 39.0057 18.6712 39.0275C18.7058 39.1524 18.7577 39.272 18.827 39.3751C18.8384 39.3914 18.85 39.4132 18.8616 39.4295C19.1095 39.7772 19.5247 40 20.0033 40C20.4819 40 20.0494 40 20.0725 40C20.8048 39.9674 21.3815 39.4024 21.3815 38.7014V33.8712L25.9657 37.5007C26.2252 37.7071 26.5366 37.805 26.848 37.8104C27.2459 37.8104 27.6496 37.6528 27.9263 37.3431C28.4222 36.7889 28.3473 35.9631 27.7534 35.4958L21.3815 30.4537V22.2385L28.9239 26.3461L30.3713 34.0723C30.5039 34.7894 31.2248 35.2622 31.9859 35.1372C32.747 35.0122 33.2488 34.3331 33.1161 33.6158L32.0782 28.0576L36.5183 30.47C36.599 30.5134 36.6856 30.5515 36.772 30.5787C36.7951 30.5787 36.8182 30.5895 36.8355 30.595C36.9681 30.6275 37.1007 30.6438 37.2334 30.6438H37.2968C37.735 30.6167 38.156 30.3885 38.3924 29.9972C38.4039 29.9755 38.4155 29.9592 38.427 29.9375C38.7615 29.3235 38.5308 28.5738 37.8907 28.226L33.4506 25.8136L39.0786 23.8848C39.3957 23.7761 39.6437 23.5697 39.8052 23.3198C40.007 22.9937 40.0589 22.5917 39.9148 22.2059C39.6495 21.5213 38.8537 21.1736 38.1329 21.4236L30.3079 24.1076L22.7596 20L30.3079 15.8924L38.1329 18.5764C38.8595 18.8264 39.6552 18.4733 39.9148 17.7941C40.18 17.1094 39.8052 16.3597 39.0843 16.1152L33.4563 14.1864L37.8965 11.774C37.9772 11.7305 38.0522 11.6762 38.1214 11.6219C38.1387 11.6055 38.156 11.5946 38.1733 11.5784C38.2713 11.486 38.3521 11.3882 38.4155 11.2795C38.427 11.2633 38.4385 11.2415 38.4443 11.2252C38.6403 10.8503 38.6346 10.3939 38.3982 10.0082C38.3866 9.98639 38.3751 9.9701 38.3635 9.94837C37.9657 9.37247 37.1584 9.18226 36.5183 9.53002L32.0782 11.9424L33.1161 6.38414C33.1738 6.069 33.1161 5.76473 32.9604 5.50937C32.7643 5.18337 32.4184 4.93345 31.9916 4.86281C31.2305 4.73784 30.5155 5.21054 30.377 5.92774L28.9297 13.6539L21.3872 17.7615V9.54631L27.7591 4.50421C28.3473 4.03695 28.428 3.21108 27.9321 2.65689C27.6553 2.34175 27.2575 2.18419 26.8538 2.18962C26.5424 2.18962 26.231 2.29286 25.9716 2.49932L21.3872 6.12877V1.29856C21.3872 0.581364 20.7702 0 20.0033 0H19.9917V0.00543322Z" fill="black"/>
</g>
<defs>
<clipPath id="clip0_562_48">
<rect width="40" height="40" fill="white"/>
</clipPath>
</defs>
</svg>
                    `;
                }

                    results_div.innerHTML = results_div.innerHTML + ` <div class="div_results" style="padding:10px; display:flex; flex-direction: column;" >


               <div style="display: flex;">
                <div style="width:20%;display: flex;flex-direction: column;">
                                  <svg style="width:25px" width="38" height="46" viewBox="0 0 38 46" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_562_32)">
<path d="M10.7376 45.9876C10.6328 45.9876 10.5282 45.9688 10.4297 45.9252C3.90344 43.2449 0 36.6998 0 28.4282C0 20.1565 5.10402 13.6614 5.32567 13.5181C5.5781 13.3498 5.90441 13.3311 6.1753 13.4744C6.44621 13.6178 6.61244 13.9045 6.61244 14.21C6.61244 16.4851 8.13322 19.2278 9.08748 19.2278C10.0849 18.8975 13.2187 12.502 13.2187 7.52157C13.2187 2.54114 11.815 1.42537 11.7965 1.4129C11.5564 1.1511 11.501 0.758398 11.6672 0.446731C11.8335 0.128831 12.1659 -0.0457029 12.523 0.0103972C28.3707 2.57853 30.6487 14.7959 31.7446 20.6677C31.9355 21.6775 32.1633 22.9117 32.3788 23.3667C32.4096 23.348 32.4403 23.3169 32.4712 23.2794C33.2592 22.3881 33.2839 18.9598 33.0499 16.8155C33.0129 16.4851 33.173 16.161 33.4624 15.9989C33.7456 15.8306 34.1028 15.8556 34.3675 16.055C34.5152 16.1672 38 18.9161 38 27.5929C38 36.2697 33.7641 42.7275 25.9203 45.9314C25.5694 46.0748 25.1692 45.9564 24.9475 45.6509C24.7259 45.3455 24.732 44.9216 24.9722 44.6287C27.3856 41.6429 28.8201 35.4408 24.2579 31.5822C21.9553 29.6437 20.6931 27.4433 20.4899 25.0435C20.336 23.1485 20.884 21.5092 21.4443 20.3685C20.0528 20.8048 18.175 21.8769 17.3069 24.5137C16.7651 26.153 16.3957 27.6491 16.1001 28.8521C15.4167 31.6197 14.9673 33.4523 13.2187 33.4523C11.4702 33.4523 11.0208 31.4265 10.836 29.9117C9.77087 30.8468 8.26862 32.8601 8.26862 36.7996C8.26862 40.7391 10.0972 43.1576 11.3655 44.6099C11.6179 44.9029 11.6425 45.333 11.4209 45.6447C11.2609 45.8691 11.0084 46 10.7437 46L10.7376 45.9876Z" fill="black"/>
</g>
<defs>
<clipPath id="clip0_562_32">
<rect width="38" height="46" fill="white"/>
</clipPath>
</defs>
</svg>
 ${additionalIcons}
                  </div>

                  <div style="width:80%">

<b style="font: 500 16px / 24px Clan-N, sans-serif;letter-spacing: -.4px;color: #272727;font-weight: 600;">${content_result.data.company.name}</b>
                <div style="font: 500 14px / 21px Clan-Pro-Book, sans-serif; letter-spacing: -.6px; color: #2d2d2d">${content_result.data.company.street}, ${content_result.data.company.city}</div>
                 <div style="display: flex;flex-direction: row;margin-top: 10px;">
                  <button style="background-color:white; color:black; border: 2px solid black;padding: 7px;cursor: pointer;" onclick="${onclick1}">pokaż na mapie</button>
                  </div>
                

</div>
                    </div>
                    <hr style="width:100%; opacity:0.2">`;
                    
                });
                $('.loading').css('display', 'none');
            } else {
              $('.loading').css('display', 'none');
            }
            } else if (air_conditioning.checked == true) {
              const cityName = results[0].name; // Extract the city name
            const centerCoords = { lat: results[0].geometry.location.lat(), lon: results[0].geometry.location.lng() };
            function findNearestInstallers(center, cachedItems) {
                if (!center || !center.lat || !center.lon) {
                    console.error("Invalid center coordinates.");
                    return [];
                }
                const centerPoint = turf.point([center.lon, center.lat]);
                const validInstallers = cachedItems.results
                    .filter(item => item.data.company.coords && item.data.company.coords.lon && item.data.company.coords.lat && item.data.valid_until_rac)
                    .map(item => {
                        const coords = item.data.company.coords;
                        return {
                            data: item.data,
                            distance: turf.distance(centerPoint, turf.point([parseFloat(coords.lon), parseFloat(coords.lat)]), { units: 'kilometers' })
                        };
                    });
                return validInstallers.sort((a, b) => a.distance - b.distance).slice(0, 5);
            }
            const content = findNearestInstallers(centerCoords, cached_items);
            console.log(content);

            if (content.length !== 0) {
              content.forEach((content_result) => {
                if (!processedCompanies.has(content_result.data.company.name)) {
                $('#display_button').css('display', 'block');
                    console.log(content_result);
                    phone = '';
                    email = '';
                    onclick1 = '';
                    additionalIcons = '';
                    if (content_result.data.company.coords !== null) {
                      onclick1 = `flyto(false,${content_result.data.company.coords.lat},${content_result.data.company.coords.lon},'${content_result.data.company.city}','${content_result.data.company.email}','${content_result.data.company.name}','${content_result.data.company.phone}','${content_result.data.company.street}','${content_result.data.company.post_code}')`;
                    }
                    if (content_result.data.company.phone !== null) {
  phone = `<svg class="mph-svg mph-svg--phone" width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.32343 10.387L8.3246 10.3856C8.55845 10.094 8.8823 9.88798 9.24564 9.79983C9.60867 9.71175 9.99062 9.74631 10.3319 9.89809C10.3322 9.89821 10.3325 9.89834 10.3328 9.89847L12.424 10.8246L12.4251 10.8251C12.7913 10.9878 13.0878 11.2752 13.2619 11.636C13.4361 11.9969 13.4766 12.4077 13.3762 12.7956L13.3758 12.7975L12.9156 14.562C12.9154 14.563 12.9151 14.5641 12.9148 14.5651C12.8111 14.9681 12.5625 15.3189 12.2163 15.5502C11.8697 15.7818 11.4499 15.8774 11.0372 15.8185C8.61473 15.4784 6.36873 14.3588 4.63862 12.6289C2.9081 10.8985 1.78779 8.65156 1.44696 6.22781L2.43722 6.08856L1.44738 6.23075C1.38804 5.81771 1.48337 5.39727 1.71511 5.0502L2.54676 5.60549L1.71511 5.0502C1.9463 4.70395 2.29702 4.45506 2.70022 4.3512L4.46691 3.89012L4.46782 3.88988C4.85606 3.78894 5.26752 3.82925 5.62879 4.00359C5.98997 4.17789 6.27744 4.47479 6.44006 4.84126L8.32343 10.387ZM8.32343 10.387L8.081 10.6905C7.51077 10.2614 7.00372 9.75407 6.57485 9.1835L6.87876 8.9405L6.8794 8.93999M8.32343 10.387L6.8794 8.93999M6.8794 8.93999C7.17124 8.70624 7.37741 8.38243 7.46579 8.0192M6.8794 8.93999L7.46579 8.0192M7.46579 8.0192C7.55417 7.65603 7.51985 7.2738 7.36818 6.93217M7.46579 8.0192L7.36818 6.93217M7.36818 6.93217C7.36816 6.93212 7.36813 6.93207 7.36811 6.93201M7.36818 6.93217L7.36811 6.93201M7.36811 6.93201L6.44017 4.84149L7.36811 6.93201Z" stroke="#00B1EB" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M10.4302 4.83545C10.9606 4.83545 11.4693 5.04616 11.8444 5.42124C12.2195 5.79631 12.4302 6.30502 12.4302 6.83545" stroke="#00B1EB" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M11.4302 1.83545C11.9555 1.83545 12.4756 1.96478 12.9609 2.21605C13.4462 2.46733 13.8872 2.83562 14.2586 3.29992C14.63 3.76421 14.9247 4.3154 15.1257 4.92203C15.3267 5.52866 15.4302 6.17884 15.4302 6.83545" stroke="#00B1EB" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
  </svg> ${content_result.data.company.phone}<br>`;
                    }
                    if (content_result.data.company.email !== null) {
  email = `<svg class="mph-svg mph-svg--email" width="17" height="17" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M10.5 16.7L4.15213 21.3022C3.11434 22.0546 2.5 23.2588 2.5 24.5406V42.4999C2.5 44.7091 4.29086 46.5 6.5 46.5H42.5C44.7091 46.5 46.5 44.7091 46.5 42.5V24.5406C46.5 23.2588 45.8857 22.0546 44.8479 21.3022L38.5 16.7" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M10.5 26.9V6.5C10.5 4.29086 12.2909 2.5 14.5 2.5H34.5C36.7091 2.5 38.5 4.29086 38.5 6.5V26.9" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M3 23L45 45" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M46 23L25 34.5" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M18.5 12.5H30.5" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  <path d="M18.5 20.5H30.5" stroke="#00B1EB" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
  </svg> ${content_result.data.company.email}<br>`;
                    }

                    const cachedCompany = cached_items.results.find(item => item.data.company.name === content_result.data.company.name);
                    console.log(cachedCompany);
                if (cachedCompany && cachedCompany.data.valid_until_heat_pump !== null && cachedCompany.data.valid_until_rac !== null) {
                    additionalIcons = `
                                                         <svg style="width:25px" width="38" height="46" viewBox="0 0 38 46" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_562_32)">
<path d="M10.7376 45.9876C10.6328 45.9876 10.5282 45.9688 10.4297 45.9252C3.90344 43.2449 0 36.6998 0 28.4282C0 20.1565 5.10402 13.6614 5.32567 13.5181C5.5781 13.3498 5.90441 13.3311 6.1753 13.4744C6.44621 13.6178 6.61244 13.9045 6.61244 14.21C6.61244 16.4851 8.13322 19.2278 9.08748 19.2278C10.0849 18.8975 13.2187 12.502 13.2187 7.52157C13.2187 2.54114 11.815 1.42537 11.7965 1.4129C11.5564 1.1511 11.501 0.758398 11.6672 0.446731C11.8335 0.128831 12.1659 -0.0457029 12.523 0.0103972C28.3707 2.57853 30.6487 14.7959 31.7446 20.6677C31.9355 21.6775 32.1633 22.9117 32.3788 23.3667C32.4096 23.348 32.4403 23.3169 32.4712 23.2794C33.2592 22.3881 33.2839 18.9598 33.0499 16.8155C33.0129 16.4851 33.173 16.161 33.4624 15.9989C33.7456 15.8306 34.1028 15.8556 34.3675 16.055C34.5152 16.1672 38 18.9161 38 27.5929C38 36.2697 33.7641 42.7275 25.9203 45.9314C25.5694 46.0748 25.1692 45.9564 24.9475 45.6509C24.7259 45.3455 24.732 44.9216 24.9722 44.6287C27.3856 41.6429 28.8201 35.4408 24.2579 31.5822C21.9553 29.6437 20.6931 27.4433 20.4899 25.0435C20.336 23.1485 20.884 21.5092 21.4443 20.3685C20.0528 20.8048 18.175 21.8769 17.3069 24.5137C16.7651 26.153 16.3957 27.6491 16.1001 28.8521C15.4167 31.6197 14.9673 33.4523 13.2187 33.4523C11.4702 33.4523 11.0208 31.4265 10.836 29.9117C9.77087 30.8468 8.26862 32.8601 8.26862 36.7996C8.26862 40.7391 10.0972 43.1576 11.3655 44.6099C11.6179 44.9029 11.6425 45.333 11.4209 45.6447C11.2609 45.8691 11.0084 46 10.7437 46L10.7376 45.9876Z" fill="black"/>
</g>
<defs>
<clipPath id="clip0_562_32">
<rect width="38" height="46" fill="white"/>
</clipPath>
</defs>
</svg>
                    `;
                }

                    results_div.innerHTML = results_div.innerHTML + ` <div class="div_results" style="padding:10px; display:flex; flex-direction: column;">

                <div style="display: flex;">

                  <div style="width:20%;display: flex;flex-direction: column;">
                  
                  <svg style="width:25px"  width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_562_48)">
<path d="M19.9917 0.00543322C19.5362 0.00543322 19.1383 0.211899 18.8846 0.52703C18.873 0.543331 18.8557 0.559631 18.8443 0.57593C18.7693 0.679163 18.7116 0.793262 18.6712 0.918226C18.6655 0.939962 18.6597 0.961698 18.6539 0.977996C18.6424 1.02146 18.6309 1.0595 18.6251 1.10296C18.6251 1.1247 18.6193 1.14642 18.6136 1.16816C18.6136 1.21163 18.6078 1.25509 18.6193 1.29856V6.12877L14.0177 2.49932C13.4296 2.03205 12.553 2.10269 12.0571 2.66232C11.5612 3.21652 11.6362 4.04238 12.2302 4.50964L18.6251 9.55174V17.7669L11.0596 13.6593L9.61221 5.93317C9.47959 5.21598 8.75877 4.74327 7.99759 4.86824C7.57088 4.93888 7.22489 5.18337 7.02883 5.51481C6.87314 5.77017 6.80971 6.07443 6.87314 6.38957L7.91109 11.9478L3.49402 9.54088C2.84817 9.19312 1.98898 9.38333 1.60839 9.98096C1.3662 10.3559 1.34891 10.7959 1.5219 11.1654C1.53343 11.1872 1.5392 11.2034 1.55073 11.2198C1.60839 11.3338 1.68336 11.4371 1.77562 11.5295C1.79292 11.5458 1.80445 11.5621 1.82175 11.5729C1.85635 11.6055 1.89095 11.6327 1.92555 11.6599C1.94284 11.6762 1.96015 11.687 1.98321 11.6979C2.02357 11.725 2.05817 11.7468 2.1043 11.7686L6.54445 14.181L0.916426 16.1098C0.189856 16.3597 -0.179196 17.1094 0.0860591 17.7887C0.351315 18.4733 1.14708 18.821 1.86789 18.571L9.69295 15.887L17.2411 19.9946L9.69295 24.1022L1.86789 21.4181C1.14131 21.1682 0.345548 21.5213 0.0860591 22.2005C-0.0638676 22.5862 -0.0119697 22.9883 0.195621 23.3143C0.351315 23.5697 0.605037 23.7707 0.922189 23.8794L6.55022 25.8082L2.13314 28.2151C1.4873 28.5629 1.23934 29.3616 1.59686 29.9755C1.82175 30.3613 2.21387 30.5895 2.64058 30.6384C2.66365 30.6384 2.68671 30.6384 2.70402 30.6384C2.83664 30.6493 2.96927 30.6384 3.1019 30.6112C3.12497 30.6112 3.14803 30.6004 3.16533 30.595C3.21146 30.5841 3.25183 30.5678 3.29796 30.5515C3.32102 30.5515 3.33832 30.5351 3.36139 30.5243C3.40175 30.508 3.44789 30.4863 3.48825 30.4646L7.92839 28.0522L6.89043 33.6104C6.75781 34.3276 7.25948 35.0014 8.02066 35.1318C8.7818 35.2567 9.49689 34.784 9.63525 34.0668L11.0826 26.3406L18.6482 22.2331V30.4483L12.2532 35.4903C11.665 35.9576 11.5843 36.7835 12.0802 37.3377C12.5761 37.8919 13.4526 37.968 14.0408 37.5007L18.6424 33.8712V38.7014C18.6251 38.7938 18.6424 38.8808 18.6539 38.9622C18.6539 38.9839 18.6655 39.0057 18.6712 39.0275C18.7058 39.1524 18.7577 39.272 18.827 39.3751C18.8384 39.3914 18.85 39.4132 18.8616 39.4295C19.1095 39.7772 19.5247 40 20.0033 40C20.4819 40 20.0494 40 20.0725 40C20.8048 39.9674 21.3815 39.4024 21.3815 38.7014V33.8712L25.9657 37.5007C26.2252 37.7071 26.5366 37.805 26.848 37.8104C27.2459 37.8104 27.6496 37.6528 27.9263 37.3431C28.4222 36.7889 28.3473 35.9631 27.7534 35.4958L21.3815 30.4537V22.2385L28.9239 26.3461L30.3713 34.0723C30.5039 34.7894 31.2248 35.2622 31.9859 35.1372C32.747 35.0122 33.2488 34.3331 33.1161 33.6158L32.0782 28.0576L36.5183 30.47C36.599 30.5134 36.6856 30.5515 36.772 30.5787C36.7951 30.5787 36.8182 30.5895 36.8355 30.595C36.9681 30.6275 37.1007 30.6438 37.2334 30.6438H37.2968C37.735 30.6167 38.156 30.3885 38.3924 29.9972C38.4039 29.9755 38.4155 29.9592 38.427 29.9375C38.7615 29.3235 38.5308 28.5738 37.8907 28.226L33.4506 25.8136L39.0786 23.8848C39.3957 23.7761 39.6437 23.5697 39.8052 23.3198C40.007 22.9937 40.0589 22.5917 39.9148 22.2059C39.6495 21.5213 38.8537 21.1736 38.1329 21.4236L30.3079 24.1076L22.7596 20L30.3079 15.8924L38.1329 18.5764C38.8595 18.8264 39.6552 18.4733 39.9148 17.7941C40.18 17.1094 39.8052 16.3597 39.0843 16.1152L33.4563 14.1864L37.8965 11.774C37.9772 11.7305 38.0522 11.6762 38.1214 11.6219C38.1387 11.6055 38.156 11.5946 38.1733 11.5784C38.2713 11.486 38.3521 11.3882 38.4155 11.2795C38.427 11.2633 38.4385 11.2415 38.4443 11.2252C38.6403 10.8503 38.6346 10.3939 38.3982 10.0082C38.3866 9.98639 38.3751 9.9701 38.3635 9.94837C37.9657 9.37247 37.1584 9.18226 36.5183 9.53002L32.0782 11.9424L33.1161 6.38414C33.1738 6.069 33.1161 5.76473 32.9604 5.50937C32.7643 5.18337 32.4184 4.93345 31.9916 4.86281C31.2305 4.73784 30.5155 5.21054 30.377 5.92774L28.9297 13.6539L21.3872 17.7615V9.54631L27.7591 4.50421C28.3473 4.03695 28.428 3.21108 27.9321 2.65689C27.6553 2.34175 27.2575 2.18419 26.8538 2.18962C26.5424 2.18962 26.231 2.29286 25.9716 2.49932L21.3872 6.12877V1.29856C21.3872 0.581364 20.7702 0 20.0033 0H19.9917V0.00543322Z" fill="black"/>
</g>
<defs>
<clipPath id="clip0_562_48">
<rect width="40" height="40" fill="white"/>
</clipPath>
</defs>
</svg>
 ${additionalIcons}
</div>

<div style="width:80%">
 <b style="font: 500 16px / 24px Clan-N, sans-serif;letter-spacing: -.4px;color: #000000;font-weight: 600;">${content_result.data.company.name}</b>
                <div style="font: 500 14px / 21px Clan-Pro-Book, sans-serif; letter-spacing: -.6px; color: #2d2d2d">${content_result.data.company.street}, ${content_result.data.company.city}</div>
                 <div style="display: flex;flex-direction: row;margin-top: 10px;">
                  <button style="background-color:white; color:black; border: 2px solid black;padding: 7px;cursor: pointer;" onclick="${onclick1}">pokaż na mapie</button>
                  </div>
                 
                 </div>
                    </div>
                    <hr style="width:100%; opacity:0.2">`;
                  }
                });
            }
        $('.loading').css('display', 'none');
            }
            
          
          } else {
            console.error("No results found for the query.");
            $('.loading').css('display', 'none');
          }
        });
      });
    }
  
    function addMarkers(data, type) {
    clearMarkers();
  
    const infoWindow = new google.maps.InfoWindow();
    const bounds = new google.maps.LatLngBounds();
  
    data.forEach((item) => {
        const company = item.data.company;
        const coords = company.coords;
        if (!coords) return; // Skip if coordinates are missing
  
        const { lat, lon } = coords;
        let count = 0;
  
        const valid_rac = item.data.valid_until_rac ? 1 : 0;
        const valid_heat_pump = item.data.valid_until_heat_pump ? 1 : 0;
  
        if (type === "valid_rac") {
            count = valid_rac;
        } else if (type === "valid_heat_pump") {
            count = valid_heat_pump;
        } else {
            count = valid_rac;
        }
  
        for (let i = 0; i < count; i++) {
          const position = { lat: parseFloat(lat), lng: parseFloat(lon) };
            const marker = new google.maps.Marker({
                position: position,
                map: map,
                name: company.name,
                phone: company.phone,
                email: company.email,
                street: company.street,
                city: company.city,
                zip: company.post_code,
                icon: {
                url: "https://gree.ivn-works.com/content/uploads/2025/02/vector.png", // Custom Icon URL
                scaledSize: new google.maps.Size(25, 36), // Resize icon
            },
            });
  
            bounds.extend(position);
  
  
            marker.addListener("click", () => {

              markers.forEach(m => {
            m.setIcon({
                url: "https://gree.ivn-works.com/content/uploads/2025/02/vector.png",
                scaledSize: new google.maps.Size(25, 36),
            });
        });

        // Enlarge clicked marker
        marker.setIcon({
            url: "https://gree.ivn-works.com/content/uploads/2025/02/vector.png",
            scaledSize: new google.maps.Size(35, 50),
        });

  if (type == 'valid_rac') {
    $('#selected_content').html(`
                <div style="display: flex;padding:20px">
                <div style="width:10%">
                                  <svg style="width:25px" width="38" height="46" viewBox="0 0 38 46" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_562_32)">
<path d="M10.7376 45.9876C10.6328 45.9876 10.5282 45.9688 10.4297 45.9252C3.90344 43.2449 0 36.6998 0 28.4282C0 20.1565 5.10402 13.6614 5.32567 13.5181C5.5781 13.3498 5.90441 13.3311 6.1753 13.4744C6.44621 13.6178 6.61244 13.9045 6.61244 14.21C6.61244 16.4851 8.13322 19.2278 9.08748 19.2278C10.0849 18.8975 13.2187 12.502 13.2187 7.52157C13.2187 2.54114 11.815 1.42537 11.7965 1.4129C11.5564 1.1511 11.501 0.758398 11.6672 0.446731C11.8335 0.128831 12.1659 -0.0457029 12.523 0.0103972C28.3707 2.57853 30.6487 14.7959 31.7446 20.6677C31.9355 21.6775 32.1633 22.9117 32.3788 23.3667C32.4096 23.348 32.4403 23.3169 32.4712 23.2794C33.2592 22.3881 33.2839 18.9598 33.0499 16.8155C33.0129 16.4851 33.173 16.161 33.4624 15.9989C33.7456 15.8306 34.1028 15.8556 34.3675 16.055C34.5152 16.1672 38 18.9161 38 27.5929C38 36.2697 33.7641 42.7275 25.9203 45.9314C25.5694 46.0748 25.1692 45.9564 24.9475 45.6509C24.7259 45.3455 24.732 44.9216 24.9722 44.6287C27.3856 41.6429 28.8201 35.4408 24.2579 31.5822C21.9553 29.6437 20.6931 27.4433 20.4899 25.0435C20.336 23.1485 20.884 21.5092 21.4443 20.3685C20.0528 20.8048 18.175 21.8769 17.3069 24.5137C16.7651 26.153 16.3957 27.6491 16.1001 28.8521C15.4167 31.6197 14.9673 33.4523 13.2187 33.4523C11.4702 33.4523 11.0208 31.4265 10.836 29.9117C9.77087 30.8468 8.26862 32.8601 8.26862 36.7996C8.26862 40.7391 10.0972 43.1576 11.3655 44.6099C11.6179 44.9029 11.6425 45.333 11.4209 45.6447C11.2609 45.8691 11.0084 46 10.7437 46L10.7376 45.9876Z" fill="black"></path>
</g>
<defs>
<clipPath id="clip0_562_32">
<rect width="38" height="46" fill="white"></rect>
</clipPath>
</defs>
</svg>
                  </div>

                  <div style="width:80%">

<b style="font: 500 16px / 24px Clan-N, sans-serif;letter-spacing: -.4px;color: #000000;font-weight: 600;">${marker.name}</b>
                <div style="font: 500 14px / 21px Clan-Pro-Book, sans-serif; letter-spacing: -.6px; color: #2d2d2d">${marker.street}, ${marker.city} ${marker.zip}</div>
                 <div style="display: flex;flex-direction: row;margin-top: 10px;    justify-content: space-between;">
                  <button id="button_tel" style="background-color:black; color:white; border: 2px solid black;padding: 7px;cursor: pointer;" onclick="showtel('${marker.phone}')">Pokaz numer telefonu</button>
                   <button style="background-color:white; color:black; border: 2px solid black;padding: 7px;cursor: pointer;" onclick="direction(${position.lat},${position.lng})">Pokaż trasę</button>
                  </div>
                

</div>
<div> onclick=""X</div>
                    </div>
                    <hr style="width:100%; opacity:0.2">
  `);

  $('#selected_content').css('display', 'block');
  } else {
    $('#selected_content').html(`
                <div style="display: flex; padding:20px">
                <div style="width:10%">
                  <svg style="width:25px" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_562_48)">
<path d="M19.9917 0.00543322C19.5362 0.00543322 19.1383 0.211899 18.8846 0.52703C18.873 0.543331 18.8557 0.559631 18.8443 0.57593C18.7693 0.679163 18.7116 0.793262 18.6712 0.918226C18.6655 0.939962 18.6597 0.961698 18.6539 0.977996C18.6424 1.02146 18.6309 1.0595 18.6251 1.10296C18.6251 1.1247 18.6193 1.14642 18.6136 1.16816C18.6136 1.21163 18.6078 1.25509 18.6193 1.29856V6.12877L14.0177 2.49932C13.4296 2.03205 12.553 2.10269 12.0571 2.66232C11.5612 3.21652 11.6362 4.04238 12.2302 4.50964L18.6251 9.55174V17.7669L11.0596 13.6593L9.61221 5.93317C9.47959 5.21598 8.75877 4.74327 7.99759 4.86824C7.57088 4.93888 7.22489 5.18337 7.02883 5.51481C6.87314 5.77017 6.80971 6.07443 6.87314 6.38957L7.91109 11.9478L3.49402 9.54088C2.84817 9.19312 1.98898 9.38333 1.60839 9.98096C1.3662 10.3559 1.34891 10.7959 1.5219 11.1654C1.53343 11.1872 1.5392 11.2034 1.55073 11.2198C1.60839 11.3338 1.68336 11.4371 1.77562 11.5295C1.79292 11.5458 1.80445 11.5621 1.82175 11.5729C1.85635 11.6055 1.89095 11.6327 1.92555 11.6599C1.94284 11.6762 1.96015 11.687 1.98321 11.6979C2.02357 11.725 2.05817 11.7468 2.1043 11.7686L6.54445 14.181L0.916426 16.1098C0.189856 16.3597 -0.179196 17.1094 0.0860591 17.7887C0.351315 18.4733 1.14708 18.821 1.86789 18.571L9.69295 15.887L17.2411 19.9946L9.69295 24.1022L1.86789 21.4181C1.14131 21.1682 0.345548 21.5213 0.0860591 22.2005C-0.0638676 22.5862 -0.0119697 22.9883 0.195621 23.3143C0.351315 23.5697 0.605037 23.7707 0.922189 23.8794L6.55022 25.8082L2.13314 28.2151C1.4873 28.5629 1.23934 29.3616 1.59686 29.9755C1.82175 30.3613 2.21387 30.5895 2.64058 30.6384C2.66365 30.6384 2.68671 30.6384 2.70402 30.6384C2.83664 30.6493 2.96927 30.6384 3.1019 30.6112C3.12497 30.6112 3.14803 30.6004 3.16533 30.595C3.21146 30.5841 3.25183 30.5678 3.29796 30.5515C3.32102 30.5515 3.33832 30.5351 3.36139 30.5243C3.40175 30.508 3.44789 30.4863 3.48825 30.4646L7.92839 28.0522L6.89043 33.6104C6.75781 34.3276 7.25948 35.0014 8.02066 35.1318C8.7818 35.2567 9.49689 34.784 9.63525 34.0668L11.0826 26.3406L18.6482 22.2331V30.4483L12.2532 35.4903C11.665 35.9576 11.5843 36.7835 12.0802 37.3377C12.5761 37.8919 13.4526 37.968 14.0408 37.5007L18.6424 33.8712V38.7014C18.6251 38.7938 18.6424 38.8808 18.6539 38.9622C18.6539 38.9839 18.6655 39.0057 18.6712 39.0275C18.7058 39.1524 18.7577 39.272 18.827 39.3751C18.8384 39.3914 18.85 39.4132 18.8616 39.4295C19.1095 39.7772 19.5247 40 20.0033 40C20.4819 40 20.0494 40 20.0725 40C20.8048 39.9674 21.3815 39.4024 21.3815 38.7014V33.8712L25.9657 37.5007C26.2252 37.7071 26.5366 37.805 26.848 37.8104C27.2459 37.8104 27.6496 37.6528 27.9263 37.3431C28.4222 36.7889 28.3473 35.9631 27.7534 35.4958L21.3815 30.4537V22.2385L28.9239 26.3461L30.3713 34.0723C30.5039 34.7894 31.2248 35.2622 31.9859 35.1372C32.747 35.0122 33.2488 34.3331 33.1161 33.6158L32.0782 28.0576L36.5183 30.47C36.599 30.5134 36.6856 30.5515 36.772 30.5787C36.7951 30.5787 36.8182 30.5895 36.8355 30.595C36.9681 30.6275 37.1007 30.6438 37.2334 30.6438H37.2968C37.735 30.6167 38.156 30.3885 38.3924 29.9972C38.4039 29.9755 38.4155 29.9592 38.427 29.9375C38.7615 29.3235 38.5308 28.5738 37.8907 28.226L33.4506 25.8136L39.0786 23.8848C39.3957 23.7761 39.6437 23.5697 39.8052 23.3198C40.007 22.9937 40.0589 22.5917 39.9148 22.2059C39.6495 21.5213 38.8537 21.1736 38.1329 21.4236L30.3079 24.1076L22.7596 20L30.3079 15.8924L38.1329 18.5764C38.8595 18.8264 39.6552 18.4733 39.9148 17.7941C40.18 17.1094 39.8052 16.3597 39.0843 16.1152L33.4563 14.1864L37.8965 11.774C37.9772 11.7305 38.0522 11.6762 38.1214 11.6219C38.1387 11.6055 38.156 11.5946 38.1733 11.5784C38.2713 11.486 38.3521 11.3882 38.4155 11.2795C38.427 11.2633 38.4385 11.2415 38.4443 11.2252C38.6403 10.8503 38.6346 10.3939 38.3982 10.0082C38.3866 9.98639 38.3751 9.9701 38.3635 9.94837C37.9657 9.37247 37.1584 9.18226 36.5183 9.53002L32.0782 11.9424L33.1161 6.38414C33.1738 6.069 33.1161 5.76473 32.9604 5.50937C32.7643 5.18337 32.4184 4.93345 31.9916 4.86281C31.2305 4.73784 30.5155 5.21054 30.377 5.92774L28.9297 13.6539L21.3872 17.7615V9.54631L27.7591 4.50421C28.3473 4.03695 28.428 3.21108 27.9321 2.65689C27.6553 2.34175 27.2575 2.18419 26.8538 2.18962C26.5424 2.18962 26.231 2.29286 25.9716 2.49932L21.3872 6.12877V1.29856C21.3872 0.581364 20.7702 0 20.0033 0H19.9917V0.00543322Z" fill="black"></path>
</g>
<defs>
<clipPath id="clip0_562_48">
<rect width="40" height="40" fill="white"></rect>
</clipPath>
</defs>
</svg>
                  </div>

                  <div style="width:80%">

<b style="font: 500 16px / 24px Clan-N, sans-serif;letter-spacing: -.4px;color: #000000;font-weight: 600;">${marker.name}</b>
                <div style="font: 500 14px / 21px Clan-Pro-Book, sans-serif; letter-spacing: -.6px; color: #2d2d2d">${marker.street}, ${marker.city} ${marker.zip}</div>
                 <div style="display: flex;flex-direction: row;margin-top: 10px;    justify-content: space-between;">
                        <button id="button_tel" style="background-color:#000000; color:#ffffff; border: 2px solid black;padding: 7px;cursor: pointer;" onclick="showtel('${marker.phone}')">Pokaz numer telefonu</button>
                  <button style="background-color:#ffffff; color:#000000; border: 2px solid black;padding: 7px;cursor: pointer;" onclick="direction(${position.lat},${position.lng})">Pokaż trasę</button>  
                  </div>
               

</div>
<div onclick="closedialog()" style="cursor:pointer">X</div>
                    </div>
                     <hr style="width:100%; opacity:0.2">
  `);
  $('#selected_content').css('display', 'block');
  }
      
            });

            markers.push(marker);
        }
    });
    
  
    // Add marker clustering
    markerCluster = new MarkerClusterer(map, markers, {
    styles: [
        {
            width: 40,
            height: 40,
            url: getGoogleClusterInlineSvg('black',40),
            textColor: 'white',
            textSize: 12,
            anchorIcon: [0, 0],
            anchorText: [13, 0],
        },
        {
            width: 50,
            height: 50,
            url: getGoogleClusterInlineSvg('black',50),
            textColor: 'white',
            textSize: 14,
            anchorIcon: [0, 0],
            anchorText: [15, 0],
        },
        {
            width: 60,
            height: 60,
            url: getGoogleClusterInlineSvg('black',60),
            textColor: 'white',
            textSize: 16,
            anchorIcon: [0, 0],
            anchorText: [20, 0],
        }
    ]
});

  
    if (markers.length > 0) {
        const padding = { top: 50, right: 50, bottom: 50, left: 50 };
        $('#loading_screen').css('display', 'none');
        //map.fitBounds(bounds, padding);
    }
    
  }
  
  var getGoogleClusterInlineSvg = function (color,width) {
        
    encoded = window.btoa(`
<svg style="pointer-events: none" xmlns="http://www.w3.org/2000/svg" height="${width}" width="${width}">
    <circle cx="${width/2}px" cy="${width/2}px" r="${width/3.33}px"  fill="#000000" />
    <circle cx="${width/2}px" cy="${width/2}px" r="${width/2.85}px" fill-opacity="0.8" fill="#000000" />
    <circle cx="${width/2}px" cy="${width/2}px" r="${width/2.5}px" fill-opacity="0.5" fill="#000000" />
    <circle cx="${width/2}px" cy="${width/2}px" r="${width/2.22}px" fill-opacity="0.20" fill="#000000" />
    <circle cx="${width/2}px" cy="${width/2}px" r="${width/2}px" fill-opacity="0.20" fill="#000000" />
</svg>`);

        return ('data:image/svg+xml;base64,' + encoded);
    };
  
    function clearMarkers() {
      if (markerCluster) {
        markerCluster.clearMarkers();
      }
      markers = [];
    }
  
  
    function showHeatPumpData() {
      fetch("https://corsproxy.io/https://europe-west3-strefa-gree.cloudfunctions.net/recomendedComapniesStats")
        .then((response) => response.json())
        .then((data) => {
          if (data.success) {
            addMarkers(data.data, "valid_heat_pump");
          } else {
            console.error("Failed to fetch data from the API");
          }
        })
        .catch((error) => console.error("Error fetching API data:", error));
    }
  
    function showRACData() {
      fetch("https://corsproxy.io/https://europe-west3-strefa-gree.cloudfunctions.net/utils/recomendedComapniesStats")
        .then((response) => response.json())
        .then((data) => {
          if (data.success) {
            addMarkers(data.data, "valid_rac");
          } else {
            console.error("Failed to fetch data from the API");
          }
        })
        .catch((error) => console.error("Error fetching API data:", error));
    }
  
    function showBoth() {
      fetch("https://corsproxy.io/https://europe-west3-strefa-gree.cloudfunctions.net/utils/recomendedComapniesStats")
        .then((response) => response.json())
        .then((data) => {
          if (data.success) {
            addMarkers(data.data, "both");
          } else {
            console.error("Failed to fetch data from the API");
          }
        })
        .catch((error) => console.error("Error fetching API data:", error));
    }
  
    function ChangeFunction() {
        var heat_pumps = document.getElementById("heat_pumps");
        var air_conditioning = document.getElementById("air_conditioning");
  
        if (heat_pumps.checked == true && air_conditioning.checked == true){
            showBoth();
        } else if (heat_pumps.checked == true && air_conditioning.checked == false){
            showHeatPumpData();
        } else if (heat_pumps.checked == false && air_conditioning.checked == true){
            showRACData();
        }  else if (heat_pumps.checked == false && air_conditioning.checked == false){
            clearMarkers();
        }
    }
  
  
    function showMarkersForLocations(locations, type) {
  locations.results.forEach((location) => {
    if (location.data.company.coords !== null) {
      const marker = new google.maps.Marker({
      position: {
        lat: parseFloat(location.data.company.coords.lat),
        lng: parseFloat(location.data.company.coords.lon),
      },
      map: map,
      name: location.data.company.name,
      icon: {
        url: "https://gree.ivn-works.com/content/uploads/2025/02/vector.png", // Custom Icon URL
       scaledSize: new google.maps.Size(25, 36),
      },
      type: type,
      phone: location.data.company.phone,
      email: location.data.company.email,
      street: location.data.company.street,
      city: location.data.company.city,
      zip: location.data.company.post_code,
    });
    searchMarkers.push(marker);

    marker.addListener("click", () => {
      if (marker.type == true) {
    $('#selected_content').html(`
                <div style="display: flex;padding:20px">
                <div style="width:10%">
                                  <svg style="width:25px" width="38" height="46" viewBox="0 0 38 46" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_562_32)">
<path d="M10.7376 45.9876C10.6328 45.9876 10.5282 45.9688 10.4297 45.9252C3.90344 43.2449 0 36.6998 0 28.4282C0 20.1565 5.10402 13.6614 5.32567 13.5181C5.5781 13.3498 5.90441 13.3311 6.1753 13.4744C6.44621 13.6178 6.61244 13.9045 6.61244 14.21C6.61244 16.4851 8.13322 19.2278 9.08748 19.2278C10.0849 18.8975 13.2187 12.502 13.2187 7.52157C13.2187 2.54114 11.815 1.42537 11.7965 1.4129C11.5564 1.1511 11.501 0.758398 11.6672 0.446731C11.8335 0.128831 12.1659 -0.0457029 12.523 0.0103972C28.3707 2.57853 30.6487 14.7959 31.7446 20.6677C31.9355 21.6775 32.1633 22.9117 32.3788 23.3667C32.4096 23.348 32.4403 23.3169 32.4712 23.2794C33.2592 22.3881 33.2839 18.9598 33.0499 16.8155C33.0129 16.4851 33.173 16.161 33.4624 15.9989C33.7456 15.8306 34.1028 15.8556 34.3675 16.055C34.5152 16.1672 38 18.9161 38 27.5929C38 36.2697 33.7641 42.7275 25.9203 45.9314C25.5694 46.0748 25.1692 45.9564 24.9475 45.6509C24.7259 45.3455 24.732 44.9216 24.9722 44.6287C27.3856 41.6429 28.8201 35.4408 24.2579 31.5822C21.9553 29.6437 20.6931 27.4433 20.4899 25.0435C20.336 23.1485 20.884 21.5092 21.4443 20.3685C20.0528 20.8048 18.175 21.8769 17.3069 24.5137C16.7651 26.153 16.3957 27.6491 16.1001 28.8521C15.4167 31.6197 14.9673 33.4523 13.2187 33.4523C11.4702 33.4523 11.0208 31.4265 10.836 29.9117C9.77087 30.8468 8.26862 32.8601 8.26862 36.7996C8.26862 40.7391 10.0972 43.1576 11.3655 44.6099C11.6179 44.9029 11.6425 45.333 11.4209 45.6447C11.2609 45.8691 11.0084 46 10.7437 46L10.7376 45.9876Z" fill="black"></path>
</g>
<defs>
<clipPath id="clip0_562_32">
<rect width="38" height="46" fill="white"></rect>
</clipPath>
</defs>
</svg>
                  </div>

                  <div style="width:80%">

<b style="font: 500 16px / 24px Clan-N, sans-serif;letter-spacing: -.4px;color: #000000;font-weight: 600;">${marker.name}</b>
                <div style="font: 500 14px / 21px Clan-Pro-Book, sans-serif; letter-spacing: -.6px; color: #2d2d2d">${marker.street}, ${marker.city} ${marker.zip}</div>
                 <div style="display: flex;flex-direction: row;margin-top: 1px;    justify-content: space-between;">
                  <button id="button_tel" style="background-color:white; color:black; border: 2px solid black;padding: 7px;cursor: pointer;" onclick="showtel('${marker.phone}')">Pokaz numer telefonu</button>
                   <button style="background-color:white; color:black; border: 2px solid black;padding: 7px;cursor: pointer;" onclick="direction(${position.lat},${position.lng})">Pokaż trasę</button>
                  </div>
                

</div>
<div onclick="closedialog()" style="cursor:pointer">X</div>
                    </div>
                    <hr style="width:100%; opacity:0.2">
  `);

  $('#selected_content').css('display', 'block');
  } else {
    $('#selected_content').html(`
                <div style="display: flex; padding:20px">
                <div style="width:10%">
                  <svg style="width:25px" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_562_48)">
<path d="M19.9917 0.00543322C19.5362 0.00543322 19.1383 0.211899 18.8846 0.52703C18.873 0.543331 18.8557 0.559631 18.8443 0.57593C18.7693 0.679163 18.7116 0.793262 18.6712 0.918226C18.6655 0.939962 18.6597 0.961698 18.6539 0.977996C18.6424 1.02146 18.6309 1.0595 18.6251 1.10296C18.6251 1.1247 18.6193 1.14642 18.6136 1.16816C18.6136 1.21163 18.6078 1.25509 18.6193 1.29856V6.12877L14.0177 2.49932C13.4296 2.03205 12.553 2.10269 12.0571 2.66232C11.5612 3.21652 11.6362 4.04238 12.2302 4.50964L18.6251 9.55174V17.7669L11.0596 13.6593L9.61221 5.93317C9.47959 5.21598 8.75877 4.74327 7.99759 4.86824C7.57088 4.93888 7.22489 5.18337 7.02883 5.51481C6.87314 5.77017 6.80971 6.07443 6.87314 6.38957L7.91109 11.9478L3.49402 9.54088C2.84817 9.19312 1.98898 9.38333 1.60839 9.98096C1.3662 10.3559 1.34891 10.7959 1.5219 11.1654C1.53343 11.1872 1.5392 11.2034 1.55073 11.2198C1.60839 11.3338 1.68336 11.4371 1.77562 11.5295C1.79292 11.5458 1.80445 11.5621 1.82175 11.5729C1.85635 11.6055 1.89095 11.6327 1.92555 11.6599C1.94284 11.6762 1.96015 11.687 1.98321 11.6979C2.02357 11.725 2.05817 11.7468 2.1043 11.7686L6.54445 14.181L0.916426 16.1098C0.189856 16.3597 -0.179196 17.1094 0.0860591 17.7887C0.351315 18.4733 1.14708 18.821 1.86789 18.571L9.69295 15.887L17.2411 19.9946L9.69295 24.1022L1.86789 21.4181C1.14131 21.1682 0.345548 21.5213 0.0860591 22.2005C-0.0638676 22.5862 -0.0119697 22.9883 0.195621 23.3143C0.351315 23.5697 0.605037 23.7707 0.922189 23.8794L6.55022 25.8082L2.13314 28.2151C1.4873 28.5629 1.23934 29.3616 1.59686 29.9755C1.82175 30.3613 2.21387 30.5895 2.64058 30.6384C2.66365 30.6384 2.68671 30.6384 2.70402 30.6384C2.83664 30.6493 2.96927 30.6384 3.1019 30.6112C3.12497 30.6112 3.14803 30.6004 3.16533 30.595C3.21146 30.5841 3.25183 30.5678 3.29796 30.5515C3.32102 30.5515 3.33832 30.5351 3.36139 30.5243C3.40175 30.508 3.44789 30.4863 3.48825 30.4646L7.92839 28.0522L6.89043 33.6104C6.75781 34.3276 7.25948 35.0014 8.02066 35.1318C8.7818 35.2567 9.49689 34.784 9.63525 34.0668L11.0826 26.3406L18.6482 22.2331V30.4483L12.2532 35.4903C11.665 35.9576 11.5843 36.7835 12.0802 37.3377C12.5761 37.8919 13.4526 37.968 14.0408 37.5007L18.6424 33.8712V38.7014C18.6251 38.7938 18.6424 38.8808 18.6539 38.9622C18.6539 38.9839 18.6655 39.0057 18.6712 39.0275C18.7058 39.1524 18.7577 39.272 18.827 39.3751C18.8384 39.3914 18.85 39.4132 18.8616 39.4295C19.1095 39.7772 19.5247 40 20.0033 40C20.4819 40 20.0494 40 20.0725 40C20.8048 39.9674 21.3815 39.4024 21.3815 38.7014V33.8712L25.9657 37.5007C26.2252 37.7071 26.5366 37.805 26.848 37.8104C27.2459 37.8104 27.6496 37.6528 27.9263 37.3431C28.4222 36.7889 28.3473 35.9631 27.7534 35.4958L21.3815 30.4537V22.2385L28.9239 26.3461L30.3713 34.0723C30.5039 34.7894 31.2248 35.2622 31.9859 35.1372C32.747 35.0122 33.2488 34.3331 33.1161 33.6158L32.0782 28.0576L36.5183 30.47C36.599 30.5134 36.6856 30.5515 36.772 30.5787C36.7951 30.5787 36.8182 30.5895 36.8355 30.595C36.9681 30.6275 37.1007 30.6438 37.2334 30.6438H37.2968C37.735 30.6167 38.156 30.3885 38.3924 29.9972C38.4039 29.9755 38.4155 29.9592 38.427 29.9375C38.7615 29.3235 38.5308 28.5738 37.8907 28.226L33.4506 25.8136L39.0786 23.8848C39.3957 23.7761 39.6437 23.5697 39.8052 23.3198C40.007 22.9937 40.0589 22.5917 39.9148 22.2059C39.6495 21.5213 38.8537 21.1736 38.1329 21.4236L30.3079 24.1076L22.7596 20L30.3079 15.8924L38.1329 18.5764C38.8595 18.8264 39.6552 18.4733 39.9148 17.7941C40.18 17.1094 39.8052 16.3597 39.0843 16.1152L33.4563 14.1864L37.8965 11.774C37.9772 11.7305 38.0522 11.6762 38.1214 11.6219C38.1387 11.6055 38.156 11.5946 38.1733 11.5784C38.2713 11.486 38.3521 11.3882 38.4155 11.2795C38.427 11.2633 38.4385 11.2415 38.4443 11.2252C38.6403 10.8503 38.6346 10.3939 38.3982 10.0082C38.3866 9.98639 38.3751 9.9701 38.3635 9.94837C37.9657 9.37247 37.1584 9.18226 36.5183 9.53002L32.0782 11.9424L33.1161 6.38414C33.1738 6.069 33.1161 5.76473 32.9604 5.50937C32.7643 5.18337 32.4184 4.93345 31.9916 4.86281C31.2305 4.73784 30.5155 5.21054 30.377 5.92774L28.9297 13.6539L21.3872 17.7615V9.54631L27.7591 4.50421C28.3473 4.03695 28.428 3.21108 27.9321 2.65689C27.6553 2.34175 27.2575 2.18419 26.8538 2.18962C26.5424 2.18962 26.231 2.29286 25.9716 2.49932L21.3872 6.12877V1.29856C21.3872 0.581364 20.7702 0 20.0033 0H19.9917V0.00543322Z" fill="black"></path>
</g>
<defs>
<clipPath id="clip0_562_48">
<rect width="40" height="40" fill="white"></rect>
</clipPath>
</defs>
</svg>
                  </div>

                  <div style="width:80%">

<b style="font: 500 16px / 24px Clan-N, sans-serif;letter-spacing: -.4px;color: #000000;font-weight: 600;">${marker.name}</b>
                <div style="font: 500 14px / 21px Clan-Pro-Book, sans-serif; letter-spacing: -.6px; color: #2d2d2d">${marker.street}, ${marker.city} ${marker.zip}</div>
                 <div style="display: flex;flex-direction: row;margin-top: 10px;    justify-content: space-between;">
                        <button id="button_tel" style="background-color:white; color:black; border: 2px solid black;padding: 7px;cursor: pointer;" onclick="showtel('${marker.phone}')">Pokaz numer telefonu</button>
                   <button style="background-color:white; color:black; border: 2px solid black;padding: 7px;cursor: pointer;" onclick="direction(${position.lat},${position.lng})">Pokaż trasę</button>
                  </div>
               

</div>
<div onclick="closedialog()" style="cursor:pointer">X</div>
                    </div>
                     <hr style="width:100%; opacity:0.2">
  `);
  $('#selected_content').css('display', 'block');
  }
    });
    }
  });
  }
  
  function clearSearchMarkers() {
  searchMarkers.forEach((marker) => marker.setMap(null));
  searchMarkers = [];
  }
  
  

  
  
  
  
  function addYourLocationButton(map) 
  {
    var controlDiv = document.createElement('div');
    controlDiv.style.display = 'flex';
    controlDiv.style.alignItems = 'center';
    
    var firstChild = document.createElement('button');
    firstChild.style.backgroundColor = '#fff';
    firstChild.style.border = 'none';
    firstChild.style.outline = 'none';
    firstChild.style.width = '28px';
    firstChild.style.height = '34px';
    firstChild.style.borderRadius = '2px';
    firstChild.style.boxShadow = '0 1px 4px rgba(0,0,0,0.3)';
    firstChild.style.cursor = 'pointer';
    firstChild.style.padding = '0px';
    firstChild.title = 'Your Location';
    controlDiv.appendChild(firstChild);
    
    var secondChild = document.createElement('div');
    secondChild.style.margin = '5px';
    secondChild.style.width = '18px';
    secondChild.style.height = '18px';
    secondChild.style.backgroundImage = 'url(https://maps.gstatic.com/tactile/mylocation/mylocation-sprite-1x.png)';
    secondChild.style.backgroundSize = '180px 18px';
    secondChild.style.backgroundPosition = '0px 0px';
    secondChild.style.backgroundRepeat = 'no-repeat';
    secondChild.id = 'you_location_img';
    firstChild.appendChild(secondChild);
    
    google.maps.event.addListener(map, 'dragend', function() {
        $('#you_location_img').css('background-position', '0px 0px');
    });
  
    firstChild.addEventListener('click', function () {
    var imgX = '0';
    var animationInterval = setInterval(function () {
        imgX = imgX === '-18' ? '0' : '-18';
        $('#you_location_img').css('background-position', imgX + 'px 0px');
    }, 500);
  
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {
            var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
            var geocoder = new google.maps.Geocoder();
  
            marker = new google.maps.Marker({
                        position: latlng,
                        map: map,
                        title: "Your Location",
                        animation: google.maps.Animation.DROP
                    });
            marker.setPosition(latlng);
            map.setCenter(latlng);
  
            // Stop animation
            clearInterval(animationInterval);
            $('#you_location_img').css('background-position', '-144px 0px');
  
            // Perform reverse geocoding
            geocoder.geocode({ 'location': latlng }, function (results, status) {
                if (status === 'OK') {
                    if (results[0]) {
                        var city = getCityFromFirstResult(results);
                        $('#search-input').val(city);
                    } else {
                        alert("No address found for this location.");
                    }
                } else {
                    alert("Geocoder failed due to: " + status);
                }
            });
        }, function (error) {
            // Handle errors (e.g., user denies location access)
            clearInterval(animationInterval);
            $('#you_location_img').css('background-position', '0px 0px');
            alert("Error getting location: " + error.message);
        });
    } else {
        clearInterval(animationInterval);
        $('#you_location_img').css('background-position', '0px 0px');
        alert("Geolocation is not supported by this browser.");
    }
  });
  
    
    controlDiv.index = 1;
    $('#search_bar_div').prepend(controlDiv);
    //map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(controlDiv);
  }
  
  
  function getCityFromFirstResult(data) {
    if (data.length === 0) return null;
  
    const firstItem = data[0]; // Get the first returned item
    const addressComponents = firstItem.address_components;
  
    // Find the component that has "locality" in its types
    const cityComponent = addressComponents.find(component => 
        component.types.includes("locality")
    );
  
    return cityComponent ? cityComponent.long_name : null;
  }
  

  
  function setGeoJsonBounds(geojson) {
      if (!geojson || !geojson.features || geojson.features.length === 0) return;
  
      var bounds = new google.maps.LatLngBounds();
  
      geojson.features.forEach(feature => {
          if (feature.geometry && feature.geometry.coordinates) {
              processGeometry(feature.geometry, bounds);
          }
      });
  
      if (!bounds.isEmpty()) {
        const padding = { top: 0, right: 0, bottom: 0, left: 0 };
          map.fitBounds(bounds,padding);
          map.setZoom(map.getZoom() + 10);
      }
  }
  
  function processGeometry(geometry, bounds) {
      if (geometry.type === "Point") {
          bounds.extend(new google.maps.LatLng(geometry.coordinates[1], geometry.coordinates[0]));
      } else if (geometry.type === "LineString" || geometry.type === "MultiPoint") {
          geometry.coordinates.forEach(coord => {
              bounds.extend(new google.maps.LatLng(coord[1], coord[0]));
          });
      } else if (geometry.type === "Polygon" || geometry.type === "MultiLineString") {
          geometry.coordinates.forEach(ring => {
              ring.forEach(coord => {
                  bounds.extend(new google.maps.LatLng(coord[1], coord[0]));
              });
          });
      } else if (geometry.type === "MultiPolygon") {
          geometry.coordinates.forEach(polygon => {
              polygon.forEach(ring => {
                  ring.forEach(coord => {
                      bounds.extend(new google.maps.LatLng(coord[1], coord[0]));
                  });
              });
          });
      }
  }


    // Load the map
    initMap();
  
  })();









  function display_button() {
  if (displayed == true) {
    $('#display_button').html('Pokaż listę');
    $('#zamknij').html('pokaż listę');
    $('.div_results').css('display', 'none');
    displayed = false;
  } else if (displayed == false) {
    $('#display_button').html('Ukryj listę');
    $('#zamknij').html('pokaż mapę');
    $('.div_results').css('display', 'block');
    displayed = true;
  }
  }

  
  function showtel(tel) {
$('#button_tel').html(`<a href="tel:${tel}">${tel}</a>`);
$("#button_tel").attr("onclick","");
  }
  
  $( document ).ready(function() {
  $('.tawk-min-container').remove();
  $('.g-container').css('max-width', 'unset');

  $("#search-input").on("keydown",function (e) {
    if(e.keyCode == 13) {
      console.log('clicked');
        $('#search-button').click();
    }
});
  });


function closedialog() {
$('#selected_content').css('display','none');
markers.forEach(m => {
            m.setIcon({
                url: "https://gree.ivn-works.com/content/uploads/2025/02/vector.png",
                scaledSize: new google.maps.Size(25, 36),
            });
        });

}

function direction(latitude,longitude) {
  window.open('https://www.google.com/maps/dir/?api=1&destination=' + latitude + ',' + longitude, '_blank').focus();
}


  
function flyto(type,latitude,longitude,city,email,name,phone,street,zip) {

  markers.forEach(m => {
            m.setIcon({
                url: "https://gree.ivn-works.com/content/uploads/2025/02/vector.png",
                scaledSize: new google.maps.Size(25, 36),
            });
        });

        markers.forEach(m => {
          if (m.name == name) {
            m.setIcon({
                url: "https://gree.ivn-works.com/content/uploads/2025/02/vector.png",
                scaledSize: new google.maps.Size(35, 50),
            });
          }
            
        });

    if (window.innerWidth < 650) {
      display_button();
    }
  map.setCenter({lat:latitude, lng:longitude});
  map.setZoom(17);
  if (type == true) {
    $('#selected_content').html(`
                <div style="display: flex;padding:20px">
                <div style="width:10%">
                                  <svg style="width:25px" width="38" height="46" viewBox="0 0 38 46" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_562_32)">
<path d="M10.7376 45.9876C10.6328 45.9876 10.5282 45.9688 10.4297 45.9252C3.90344 43.2449 0 36.6998 0 28.4282C0 20.1565 5.10402 13.6614 5.32567 13.5181C5.5781 13.3498 5.90441 13.3311 6.1753 13.4744C6.44621 13.6178 6.61244 13.9045 6.61244 14.21C6.61244 16.4851 8.13322 19.2278 9.08748 19.2278C10.0849 18.8975 13.2187 12.502 13.2187 7.52157C13.2187 2.54114 11.815 1.42537 11.7965 1.4129C11.5564 1.1511 11.501 0.758398 11.6672 0.446731C11.8335 0.128831 12.1659 -0.0457029 12.523 0.0103972C28.3707 2.57853 30.6487 14.7959 31.7446 20.6677C31.9355 21.6775 32.1633 22.9117 32.3788 23.3667C32.4096 23.348 32.4403 23.3169 32.4712 23.2794C33.2592 22.3881 33.2839 18.9598 33.0499 16.8155C33.0129 16.4851 33.173 16.161 33.4624 15.9989C33.7456 15.8306 34.1028 15.8556 34.3675 16.055C34.5152 16.1672 38 18.9161 38 27.5929C38 36.2697 33.7641 42.7275 25.9203 45.9314C25.5694 46.0748 25.1692 45.9564 24.9475 45.6509C24.7259 45.3455 24.732 44.9216 24.9722 44.6287C27.3856 41.6429 28.8201 35.4408 24.2579 31.5822C21.9553 29.6437 20.6931 27.4433 20.4899 25.0435C20.336 23.1485 20.884 21.5092 21.4443 20.3685C20.0528 20.8048 18.175 21.8769 17.3069 24.5137C16.7651 26.153 16.3957 27.6491 16.1001 28.8521C15.4167 31.6197 14.9673 33.4523 13.2187 33.4523C11.4702 33.4523 11.0208 31.4265 10.836 29.9117C9.77087 30.8468 8.26862 32.8601 8.26862 36.7996C8.26862 40.7391 10.0972 43.1576 11.3655 44.6099C11.6179 44.9029 11.6425 45.333 11.4209 45.6447C11.2609 45.8691 11.0084 46 10.7437 46L10.7376 45.9876Z" fill="black"></path>
</g>
<defs>
<clipPath id="clip0_562_32">
<rect width="38" height="46" fill="white"></rect>
</clipPath>
</defs>
</svg>
                  </div>

                  <div style="width:80%">

<b style="font: 500 16px / 24px Clan-N, sans-serif;letter-spacing: -.4px;color: #000000;font-weight: 600;">${name}</b>
                <div style="font: 500 14px / 21px Clan-Pro-Book, sans-serif; letter-spacing: -.6px; color: #2d2d2d">${street}, ${city} ${zip}</div>
                 <div style="display: flex;flex-direction: row;margin-top: 10px;    justify-content: space-between;">
                  <button id="button_tel" style="background-color:black; color:white; border: 2px solid black;padding: 7px;cursor: pointer;" onclick="showtel('${phone}')">Pokaz numer telefonu</button>
                   <button style="background-color:white; color:black; border: 2px solid black;padding: 7px;cursor: pointer;" onclick="direction(${latitude},${longitude})">Pokaż trasę</button>
                  </div>
                

</div>
<div onclick="closedialog()" style="cursor:pointer">X</div>
                    </div>
                    <hr style="width:100%; opacity:0.2">
  `);

  $('#selected_content').css('display', 'block');
  } else {
    $('#selected_content').html(`
                <div style="display: flex; padding:20px">
                <div style="width:10%">
                  <svg style="width:25px" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_562_48)">
<path d="M19.9917 0.00543322C19.5362 0.00543322 19.1383 0.211899 18.8846 0.52703C18.873 0.543331 18.8557 0.559631 18.8443 0.57593C18.7693 0.679163 18.7116 0.793262 18.6712 0.918226C18.6655 0.939962 18.6597 0.961698 18.6539 0.977996C18.6424 1.02146 18.6309 1.0595 18.6251 1.10296C18.6251 1.1247 18.6193 1.14642 18.6136 1.16816C18.6136 1.21163 18.6078 1.25509 18.6193 1.29856V6.12877L14.0177 2.49932C13.4296 2.03205 12.553 2.10269 12.0571 2.66232C11.5612 3.21652 11.6362 4.04238 12.2302 4.50964L18.6251 9.55174V17.7669L11.0596 13.6593L9.61221 5.93317C9.47959 5.21598 8.75877 4.74327 7.99759 4.86824C7.57088 4.93888 7.22489 5.18337 7.02883 5.51481C6.87314 5.77017 6.80971 6.07443 6.87314 6.38957L7.91109 11.9478L3.49402 9.54088C2.84817 9.19312 1.98898 9.38333 1.60839 9.98096C1.3662 10.3559 1.34891 10.7959 1.5219 11.1654C1.53343 11.1872 1.5392 11.2034 1.55073 11.2198C1.60839 11.3338 1.68336 11.4371 1.77562 11.5295C1.79292 11.5458 1.80445 11.5621 1.82175 11.5729C1.85635 11.6055 1.89095 11.6327 1.92555 11.6599C1.94284 11.6762 1.96015 11.687 1.98321 11.6979C2.02357 11.725 2.05817 11.7468 2.1043 11.7686L6.54445 14.181L0.916426 16.1098C0.189856 16.3597 -0.179196 17.1094 0.0860591 17.7887C0.351315 18.4733 1.14708 18.821 1.86789 18.571L9.69295 15.887L17.2411 19.9946L9.69295 24.1022L1.86789 21.4181C1.14131 21.1682 0.345548 21.5213 0.0860591 22.2005C-0.0638676 22.5862 -0.0119697 22.9883 0.195621 23.3143C0.351315 23.5697 0.605037 23.7707 0.922189 23.8794L6.55022 25.8082L2.13314 28.2151C1.4873 28.5629 1.23934 29.3616 1.59686 29.9755C1.82175 30.3613 2.21387 30.5895 2.64058 30.6384C2.66365 30.6384 2.68671 30.6384 2.70402 30.6384C2.83664 30.6493 2.96927 30.6384 3.1019 30.6112C3.12497 30.6112 3.14803 30.6004 3.16533 30.595C3.21146 30.5841 3.25183 30.5678 3.29796 30.5515C3.32102 30.5515 3.33832 30.5351 3.36139 30.5243C3.40175 30.508 3.44789 30.4863 3.48825 30.4646L7.92839 28.0522L6.89043 33.6104C6.75781 34.3276 7.25948 35.0014 8.02066 35.1318C8.7818 35.2567 9.49689 34.784 9.63525 34.0668L11.0826 26.3406L18.6482 22.2331V30.4483L12.2532 35.4903C11.665 35.9576 11.5843 36.7835 12.0802 37.3377C12.5761 37.8919 13.4526 37.968 14.0408 37.5007L18.6424 33.8712V38.7014C18.6251 38.7938 18.6424 38.8808 18.6539 38.9622C18.6539 38.9839 18.6655 39.0057 18.6712 39.0275C18.7058 39.1524 18.7577 39.272 18.827 39.3751C18.8384 39.3914 18.85 39.4132 18.8616 39.4295C19.1095 39.7772 19.5247 40 20.0033 40C20.4819 40 20.0494 40 20.0725 40C20.8048 39.9674 21.3815 39.4024 21.3815 38.7014V33.8712L25.9657 37.5007C26.2252 37.7071 26.5366 37.805 26.848 37.8104C27.2459 37.8104 27.6496 37.6528 27.9263 37.3431C28.4222 36.7889 28.3473 35.9631 27.7534 35.4958L21.3815 30.4537V22.2385L28.9239 26.3461L30.3713 34.0723C30.5039 34.7894 31.2248 35.2622 31.9859 35.1372C32.747 35.0122 33.2488 34.3331 33.1161 33.6158L32.0782 28.0576L36.5183 30.47C36.599 30.5134 36.6856 30.5515 36.772 30.5787C36.7951 30.5787 36.8182 30.5895 36.8355 30.595C36.9681 30.6275 37.1007 30.6438 37.2334 30.6438H37.2968C37.735 30.6167 38.156 30.3885 38.3924 29.9972C38.4039 29.9755 38.4155 29.9592 38.427 29.9375C38.7615 29.3235 38.5308 28.5738 37.8907 28.226L33.4506 25.8136L39.0786 23.8848C39.3957 23.7761 39.6437 23.5697 39.8052 23.3198C40.007 22.9937 40.0589 22.5917 39.9148 22.2059C39.6495 21.5213 38.8537 21.1736 38.1329 21.4236L30.3079 24.1076L22.7596 20L30.3079 15.8924L38.1329 18.5764C38.8595 18.8264 39.6552 18.4733 39.9148 17.7941C40.18 17.1094 39.8052 16.3597 39.0843 16.1152L33.4563 14.1864L37.8965 11.774C37.9772 11.7305 38.0522 11.6762 38.1214 11.6219C38.1387 11.6055 38.156 11.5946 38.1733 11.5784C38.2713 11.486 38.3521 11.3882 38.4155 11.2795C38.427 11.2633 38.4385 11.2415 38.4443 11.2252C38.6403 10.8503 38.6346 10.3939 38.3982 10.0082C38.3866 9.98639 38.3751 9.9701 38.3635 9.94837C37.9657 9.37247 37.1584 9.18226 36.5183 9.53002L32.0782 11.9424L33.1161 6.38414C33.1738 6.069 33.1161 5.76473 32.9604 5.50937C32.7643 5.18337 32.4184 4.93345 31.9916 4.86281C31.2305 4.73784 30.5155 5.21054 30.377 5.92774L28.9297 13.6539L21.3872 17.7615V9.54631L27.7591 4.50421C28.3473 4.03695 28.428 3.21108 27.9321 2.65689C27.6553 2.34175 27.2575 2.18419 26.8538 2.18962C26.5424 2.18962 26.231 2.29286 25.9716 2.49932L21.3872 6.12877V1.29856C21.3872 0.581364 20.7702 0 20.0033 0H19.9917V0.00543322Z" fill="black"></path>
</g>
<defs>
<clipPath id="clip0_562_48">
<rect width="40" height="40" fill="white"></rect>
</clipPath>
</defs>
</svg>
                  </div>

                  <div style="width:80%">

<b style="font: 500 16px / 24px Clan-N, sans-serif;letter-spacing: -.4px;color: #000000;font-weight: 600;">${name}</b>
                <div style="font: 500 14px / 21px Clan-Pro-Book, sans-serif; letter-spacing: -.6px; color: #2d2d2d">${street}, ${city} ${zip}</div>
                 <div style="display: flex;flex-direction: row;margin-top: 10px;    justify-content: space-between;">
                        <button id="button_tel" style="background-color:black; color:white; border: 2px solid black;padding: 7px;cursor: pointer;" onclick="showtel('${phone}')">Pokaz numer telefonu</button>
                   <button style="background-color:white; color:black; border: 2px solid black;padding: 7px;cursor: pointer;" onclick="direction(${latitude},${longitude})">Pokaż trasę</button>
                  </div>
               

</div>
<div onclick="closedialog()" style="cursor:pointer">X</div>
                    </div>
                     <hr style="width:100%; opacity:0.2">
  `);
  $('#selected_content').css('display', 'block');
  }

  }
    
  </script>